[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Synthetic Population Catalyst",
    "section": "",
    "text": "Introduction\n\nThe Synthetic Population Catalyst (SPC) makes it easier for researchers to work with synthetic population data in Great Britain. It combines a variety of data sources and outputs a single file in protocol buffer format, describing the population and its activities in a given study area. The data include socio-demographic, health, salary and daily activity data per person, and information about the venues where people conduct those activities.\nSPC outputs can be used to catalyse other projects. Rather than join together many raw data sources yourself and deal with missing and messy data, you can leverage SPC’s effort and well-documented schema.\nYou can download this site as a PDF and find all code on Github.\n\n\nThis work was supported by Wave 1 of The UKRI Strategic Priorities Fund under the EPSRC Grant EP/W006022/1, particularly the “Ecosystem of Digital Twins” and “Shocks and Resilience” themes within that grant & The Alan Turing Institute"
  },
  {
    "objectID": "using_getting_started.html#what-spc-does",
    "href": "using_getting_started.html#what-spc-does",
    "title": "1  Getting started",
    "section": "1.1 What SPC does",
    "text": "1.1 What SPC does\nSPC generates spatially enriched synthetic population outputs for any area that is comprised of one or more Middle-Layer Output Areas (MSOAs) in England and Wales and/or one or more Intermediary Zones (IZ) in Scotland, including Local Authority Districts - LADs. The output file generated by SPC has a granularity of Output Area (150 ±100 households). This file is structured to help other researchers or urban analysts to feed dynamic models, such as ABMs, for multiple purposes where an enriched synthetic population file is required. SPC includes a comprehensive set of variables that include sociodemographic characteristics, daily activities, and other extra data to help you model the complexity of British society."
  },
  {
    "objectID": "using_getting_started.html#what-spc-outputs",
    "href": "using_getting_started.html#what-spc-outputs",
    "title": "1  Getting started",
    "section": "1.2 What SPC outputs",
    "text": "1.2 What SPC outputs\nYou can see all of the per-person, household, and OA information SPC provides in the schema and data sources. We use protocol buffers to efficiently encode the data and describe its shape."
  },
  {
    "objectID": "using_outputs.html#citing",
    "href": "using_outputs.html#citing",
    "title": "2  SPC Outputs",
    "section": "2.1 Citing",
    "text": "2.1 Citing\nIf you use SPC code or data in your work, please cite using the Zenodo DOI (using the bottom-right tool to generate the citation)."
  },
  {
    "objectID": "using_outputs.html#versioning",
    "href": "using_outputs.html#versioning",
    "title": "2  SPC Outputs",
    "section": "2.2 Versioning",
    "text": "2.2 Versioning\nOver time, we may add more data to SPC or change the schema. Protocol buffers are designed to let combinations of new/old code and data files work together, but we don’t intend to use this feature. We may make breaking changes, like deleting fields. We’ll release a new version of the schema and output data every time and document it here. You should depend on a specific version of the data output in your code, so new releases don’t affect you until you decide to update.\n\nv1: released 25/04/2022, schema\nv1.1, released 27/05/2022, schema\n\nadded pwkstat, salary_hourly, salary_yearly, and idp\nreorganized Identifiers and Employment attributes\nnon-breaking change added 02/08/2022: added bmi_new field\n\nv1.2, released 29/12/2022, schema\n\nswitched to proto2 and made some fields optional\nadjusted some numeric enum values to match ONS\n\nv2, released 09/03/2023, schema\n\nnew per-person and per-household fields\nvarious changes to existing fields (adjusting enum number, removing the BMI enum, etc)\nadding time-use diaries\nexpanding to Wales\nadding multiple years of output\n\nv2.1, released 25/07/2023, schema\n\nexpanding to Scotland\nadding special area: Oxford-Cambridge arc\nadding previously missing LADs to their counties:\n\nGreater London (E09000001)\nCornwall (E06000053)\nDorset (E06000058 & E06000059)\nBuckinghamshire (E06000060)\nLeicestershire (E07000135)\nSuffolk (E07000244 & E07000245)\nSomerset (E07000246)"
  },
  {
    "objectID": "using_england_outputs.html#citing",
    "href": "using_england_outputs.html#citing",
    "title": "3  Outputs for England (Counties)",
    "section": "3.1 Citing",
    "text": "3.1 Citing\nIf you use SPC code or data in your work, please cite using the Zenodo DOI (using the bottom-right tool to generate the citation)."
  },
  {
    "objectID": "using_wales_outputs.html#citing",
    "href": "using_wales_outputs.html#citing",
    "title": "4  Outputs for Wales (ITL regions)",
    "section": "4.1 Citing",
    "text": "4.1 Citing\nIf you use SPC code or data in your work, please cite using the Zenodo DOI (using the bottom-right tool to generate the citation)."
  },
  {
    "objectID": "using_scotland_outputs.html#citing",
    "href": "using_scotland_outputs.html#citing",
    "title": "5  Outputs for Scotland (Police Divisions)",
    "section": "5.1 Citing",
    "text": "5.1 Citing\nIf you use SPC code or data in your work, please cite using the Zenodo DOI (using the bottom-right tool to generate the citation)."
  },
  {
    "objectID": "using_use_output.html#javascript",
    "href": "using_use_output.html#javascript",
    "title": "6  How to use the output file",
    "section": "6.1 Javascript",
    "text": "6.1 Javascript\nWe have a web app using Svelte to interactively explore SPC data. Its source code is great reference for how to use the proto output."
  },
  {
    "objectID": "using_use_output.html#python",
    "href": "using_use_output.html#python",
    "title": "6  How to use the output file",
    "section": "6.2 Python",
    "text": "6.2 Python\nTo work with SPC protobufs in Python, you need two dependencies setup:\n\nThe protobuf library\n\nYou can install system-wide with pip install protobuf\nOr add as a dependency to a conda, poetry, etc environment\n\nThe generated Python library, synthpop_pb2.py\n\nYou can download a copy of this file into your codebase, then import synthpop_pb2\nYou can also generate the file yourself, following the docs: protoc --python_out=python/ synthpop.proto\n\n\n\n6.2.1 Converting to Pandas data-frames and CSV\nThe schema expresses relationships between people, households, and venues that can’t all be captured by a simple 2D table. Nevertheless, you can extract per-person information and express as a dataframe or CSV file. See this example Python script for inspiration. You can try it out:\n# Download a file\nwget https://ramp0storage.blob.core.windows.net/spc-output/v1/rutland.pb.gz\n# Uncompress\ngunzip rutland.pb.gz\n# Convert the .pb to JSON\npython3 python/protobuf_to_csv.py --input_path data/output/rutland.pb\n# View the output\nless people.csv\n\n\n6.2.2 Converting .pb file to JSON format\nTo interactively explore the data, viewing JSON is much easier. It shows the same structure as the protobuf, but in a human-readable text format. The example below uses a small Python script:\n# Download a file\nwget https://ramp0storage.blob.core.windows.net/spc-output/v1/rutland.pb.gz\n# Uncompress\ngunzip rutland.pb.gz\n# Convert the .pb to JSON\npython3 python/protobuf_to_json.py data/output/rutland.pb &gt; rutland.json\n# View the output\nless rutland.json\n\n\n6.2.3 Converting to numpy arrays\nThe ASPICS project simulates the spread of COVID through a population. The code uses numpy, and this script converts the protobuf to a bunch of different numpy arrays.\nNote the ASPICS code doesn’t keep using the generated Python protobuf classes for the rest of the pipeline. Data frames and numpy arrays may be more familiar and appropriate. The protobuf is a format optimized for reading and writing; you don’t need to use it throughout all of your model code.\n\n\n6.2.4 Visualizing venues\nUse this script to read a protobuf file, then draws a dot for every venue, color-coded by activity."
  },
  {
    "objectID": "using_installation.html#dependencies",
    "href": "using_installation.html#dependencies",
    "title": "7  Full tool installation",
    "section": "7.1 Dependencies",
    "text": "7.1 Dependencies\n\nRust: The latest stable version of Rust: https://www.rust-lang.org/tools/install"
  },
  {
    "objectID": "using_installation.html#compiling-spc",
    "href": "using_installation.html#compiling-spc",
    "title": "7  Full tool installation",
    "section": "7.2 Compiling SPC",
    "text": "7.2 Compiling SPC\ngit clone https://github.com/alan-turing-institute/uatk-spc/\ncd uatk-spc\n# The next command will take a few minutes the first time you do it, to build external dependencies\ncargo build --release"
  },
  {
    "objectID": "using_installation.html#troubleshooting-downloading",
    "href": "using_installation.html#troubleshooting-downloading",
    "title": "7  Full tool installation",
    "section": "7.3 Troubleshooting downloading",
    "text": "7.3 Troubleshooting downloading\nIf you get an error No such file or directory (os error 2) it might be because a previous attempt to run SPC failed, and some necessary files were not fully downloaded. In these cases you could try deleting the data/raw_data directory and then running SPC again. It should automatically try to download the big files again.\nIf you have trouble downloading any of the large files, you can download them manually. The logs will contain a line such as Downloading https://ramp0storage.blob.core.windows.net/nationaldata/QUANT_RAMP_spc.tar.gz to data/raw_data/nationaldata/QUANT_RAMP_spc.tar.gz. This tells you the URL to retrieve, and where to put the output file. Note that SPC won’t attempt to download files if they already exist, so if you wind up with a partially downloaded file, you have to manually remove it."
  },
  {
    "objectID": "using_custom_areas.html#specifying-the-area",
    "href": "using_custom_areas.html#specifying-the-area",
    "title": "8  Running a custom area",
    "section": "8.1 Specifying the area",
    "text": "8.1 Specifying the area\nSPC takes a newline-separated list of MSOAs in the config/ directory as input, like this. You can generate this list from a LAD (local authority district). From the main SPC directory, run python scripts/select_msoas.py. Refer to data/raw_data/referencedata/lookUp.csv (only available after running SPC once) for all geographies available.\nThis script will create a new file, config/your_region.txt."
  },
  {
    "objectID": "using_custom_areas.html#run-spc-for-the-new-area",
    "href": "using_custom_areas.html#run-spc-for-the-new-area",
    "title": "8  Running a custom area",
    "section": "8.2 Run SPC for the new area",
    "text": "8.2 Run SPC for the new area\nFrom the main directory, just run:\ncargo run --release -- config/your_region.txt\nThis will download some large files the first time. You’ll wind up with data/output/your_region.pb as output, as well as lots of intermediate files in data/raw_data/. The next time you run this command (even on a different study area), it should go much faster."
  },
  {
    "objectID": "using_custom_areas.html#optional-run-spc-for-lots-of-areas",
    "href": "using_custom_areas.html#optional-run-spc-for-lots-of-areas",
    "title": "8  Running a custom area",
    "section": "8.3 (Optional) run SPC for lots of areas",
    "text": "8.3 (Optional) run SPC for lots of areas\nIf you want to run the program over lots of areas at once and are using Mac/Linux, you can use a for loop in a terminal to repeatedly run SPC over all files in the config directory. For example, this will run SPC on all .txt files in the config directory:\nfor file in config/*.csv; do cargo run --release -- config/$file; done"
  },
  {
    "objectID": "using_custom_areas.html#using-the-output",
    "href": "using_custom_areas.html#using-the-output",
    "title": "8  Running a custom area",
    "section": "8.4 Using the output",
    "text": "8.4 Using the output\nAfter you generate the files, see here for how to use them in your project.\nIf you use SPC code or data in your work, please cite using the Zenodo DOI (using the bottom-right tool to generate the citation)."
  },
  {
    "objectID": "understanding_introduction.html",
    "href": "understanding_introduction.html",
    "title": "9  Introduction",
    "section": "",
    "text": "Blabla"
  },
  {
    "objectID": "understanding_technical_overview.html#phase-1-data-preparation",
    "href": "understanding_technical_overview.html#phase-1-data-preparation",
    "title": "10  Technical overview",
    "section": "10.1 Phase 1: Data preparation",
    "text": "10.1 Phase 1: Data preparation\n\n10.1.1 SPENSER\nThe original SPENSER model is made up of 5 different GitHub repositories, operating specific parts of the simulation of a synthetic population (gathering the data from ONS, creating individuals, creating households, assigning individuals to households and projecting the population to future years). We use this modified version with instructions for running the full pipeline on a single machine.\nThe SPENSER microsimulation is split into three steps:\n\nHousehold synthesis: households are synthesised for a base year (2011) from census data at OA resolution. These households are then sequentially synthesised for subsequent years using household forecasts.\nPopulation synthesis: people are sequentially synthesised using marginal census data on gender, age and ethnicity at MSOA resolution for 2011, with population projections used to derive the marginals beyond the reference census year.\nAssignment: for a given year, the synthesised population (from step 2) can be assigned to a synthesised household (from step 1), while a “household representative person” from the synthesised population (step 2) is assigned to each synthesised household (from step 1).\n\nThe result of SPENSER is two separate datasets and a merging key: one dataset for individuals, accurate at MSOA level and containing the sex, age and ethnicity fields; and one for households, accurate at OA level and containing the OA11CD, HOUSE_nssec8, House_type, HOUSE_typeCommunal, HOUSE_NRooms, HOUSE_centralHeat, HOUSE_tenure and HOUSE_NCars fields respectively.\n\n\n10.1.2 Downloading and preparation of public data from various sources\nInstructions to run this step from the source code can be found under Step 1: Curate public data from diverse sources. The result is a set of data files, some of which will be merged with the outputs from SPENSER during the next step, containing:\n\nNSSEC8 distributions among the population of England and Wales by age group and sex at MSOA level (NSSEC8_EW_F_16to24_CLEAN.csv, etc.) and among the total population of Scotland by age group, sex and ethnicity (NSSECS_CLEAN.csv)\nA combined extract from the three latest GB Health Surveys (HSComplete.csv)\nAn extract from the UK Time Use Survey 2015 (indivTUS.csv)\nA file containing a set of coefficients to estimate the average BMI of individuals in England depending on their age, sex and ethnicity (BMIdMean.csv) and a file containing coefficients to obtain the equivalent average BMI in Scotland and Wales (BMIdiff.csv)\nCoefficients to estimate the hourly salary of an employee in England depending on their home region, sex, part-time/full-time status, age and SOC category (coefFFT.csv, etc. & ageRescaleFFT.csv, etc.).\nCoefficients to estimate the numbers of hours worked corresponding to the criteria mentioned above (meanHoursFFT.csv, etc. and distribHours.csv)\nCentroid coordinates of Output areas in GB (OACentroids.csv)\n\nIn addition, four files to be used by the second phase of the model are outputted:\n\ndiariesRef.csv contains diaries of typical days extracted from the UK Time Use Survey\nbusinessRegistry.csv contains a list of all individual workplaces in GB\ntimeAtHomeIncreaseCTY.csv contains a reduction in time spent away from home during the pandemic according to Google Mobility reports\nlookUp-GB.csv is a comprehensive lookup table between GB geographies, including name variants used by Google and OSM and local file names for storage within Azure\n\nTo understand the methods supporting the creation of these files, we refer the reader to the corresponding section inside the modelling methods section.\n\n\n10.1.3 Enriching SPENSER\nInstructions to run this step can be found under Step 2: Add to SPENSER. Line numbers quoted in the following refer to this script.\nOnce merged into one dataset according to the matching key (l. 13-49), the SPENSER data is enriched with the outputs of the previous step. An individual among those sharing the same 5-year age group (extra details for under 18) and sex is drawn from the participants of the Health Survey (l. 56-72). This adds the id_HS, HEALTH_diabetes, HEALTH_bloodpressure, HEALTH_cvd, HEALTH_NMedecines, HEALTH_selfAssessed and HEALTH_lifeSat fields. This join is not spatially differentiated and other matching criteria (ethnicity and nssec8) were retained due to a lack of representativity inside the survey. The BMI field is then added l. 74-89, according to this method.\nEach individual that is not a head of household is assigned an nssec8 category (l. 96-108). This is done according to nssec8 category distributions among the general population by sex and age groups according to ONS data (DC6114EW and DC6206SC datasets). An individual among those sharing the same 5-year age group, sex and nssec8 category is drawn from the participants of the UK Time Use Survey (l. 111-125). This adds the id_TUS_hh, id_TUS_p, pwkstat, soc2010, sic1d2007, sic2d2007, netPayWeekly and workedHoursWeekly fields. Note that the netPayWeekly and workedHoursWeekly fields have a low response rate among participants of the survey. For that reason, we have added a much more detailed modelling of income, that includes spatial differences at region level (l. 130-140).\nCoordinates of the OA where the household’s home is located are finally added l. 152-156.\n\n\n10.1.4 Azure upload\nFollowing enrichment, a final step involves grouping LADs into counties and uploading to an Azure container for use as input for Phase 2 below."
  },
  {
    "objectID": "understanding_technical_overview.html#phase-2-running-spc-for-a-specific-study-area",
    "href": "understanding_technical_overview.html#phase-2-running-spc-for-a-specific-study-area",
    "title": "10  Technical overview",
    "section": "10.2 Phase 2: Running SPC for a specific study area",
    "text": "10.2 Phase 2: Running SPC for a specific study area\nThis part is corresponding to the scripts written in Rust. Instructions can be found here."
  },
  {
    "objectID": "understanding_modelling_methods.html#spenser-and-quant",
    "href": "understanding_modelling_methods.html#spenser-and-quant",
    "title": "11  Modelling methods",
    "section": "11.1 SPENSER and QUANT",
    "text": "11.1 SPENSER and QUANT\nThe generation of the population data by SPENSER and the modelling of trips to schools and retail by QUANT are detailed in\n\nLomax N et al. An Open-Source Model for Projecting Small Area Demographic and Land-Use Change. Geographical analysis, 54(3), 599-622 (2022). (DOI)\n\nand\n\nSpooner F et al. A dynamic microsimulation model for epidemics. Soc Sci Med., 291:114461 (2021). (DOI)"
  },
  {
    "objectID": "understanding_modelling_methods.html#bmi-estimation",
    "href": "understanding_modelling_methods.html#bmi-estimation",
    "title": "11  Modelling methods",
    "section": "11.2 BMI estimation",
    "text": "11.2 BMI estimation\nBody Max Index (BMI) is calculated for each individual from the Health Survey for England 2019 (access needs to be requested to the UK Data Service). This calculation is independent from the matching with the Heath Survey that happens during the data preparation step, therefore the BMI values will not match the ones that could be obtained from the Health Survey identifiers included in the output. As the BMI variable is not necessarily independent from the other health variables (diabetes etc.), the new variable should only be used for studies where all other variables are considered equal. The new variable is continuous (a float) instead of categorical.\nAccording to the HSE 2019, the distribution of BMI values should follow figure 1. The socio-economic category variable was discarded for the modelling as it is not independent from the other variables, and “mixed” and “other” ethnicity categories have been merged due to small sample sizes.\n Figure 1. BMI per age. Columns represent ethnicity (White, Black, Asian, Other), and the rows sex (female, male).\nThe distribution for each age group is a gamma distribution. See figure 2.\n Figure 2. Distribution of BMI values for white females aged 30-34.\nDue to small sample sizes, the BMI is calculated for each individual depending on their age according to a gamma distribution whose mean is the mean for the corresponding age, sex and ethnicity (thick line in figure 1), but whose variance is only determined by the total variance by sex and ethnicity. The resulting BMI values were validated for Bedfordshire, and correlations of 0.93 and 0.97 were found between the mean and variance of the modelled data compared to those for the reference HSE 2019 data. See figure 3. The distribution per age, as in figure 1, were also validated.\n Figure 3. Modelled mean and variance compared to the reference mean and variance from the HSE 2019 data for each of the eight categories of figure 1.\nThe R code for this modelling are l. 239-406 of this script, and the validation is included in the legacy version, here."
  },
  {
    "objectID": "understanding_modelling_methods.html#income-data",
    "href": "understanding_modelling_methods.html#income-data",
    "title": "11  Modelling methods",
    "section": "11.3 Income data",
    "text": "11.3 Income data\nThis modelling is based on the 2020 revised edition of the Earnings and hours worked, region by occupation by four-digit SOC: ASHE Table 15 database from ONS. Some percentiles for employees’ gross hourly salaries are provided for each full-time and part-time job according to their four-digit SOC classification per region, and separated by sex. It is supported by this script.\n\n11.3.1 Methods\nThe data are far from complete (only about 15% of all possible values), especially for the highest deciles. We found that the missing values amongst the partially filled SOCs could be estimated by interpolating an order 3 polynomial to the existing values. We found that the order 3 polynomials were a good fit for most categories (93.11%). SOCs with too many missing values are given the value for the category that is immediately higher in the SOC hierarchy. For some jobs, the highest percentiles seem capped, making the polynomial fitting fail. In that case, we have replaced the unknown values with the highest known value (as there is no clear and systematic fitting for these special cases). In addition, the highest decile is never detailed in the data, which means that the highest salaries are underestimated in the model (and exceptionally high salaries are not present). The result of this phase is four tables {male full-time, male part-time, female full-time, female part-time} containing the coefficients of the fitted order 3 polynomials, with an optional cap when relevant. This step is done in section 1 of the script.\nA percentile is chosen randomly (uniformly) for each individual in England, and the salary is then deduced according to their full-time/part-time status, region, sex and SOC category. Age data from ONS are then integrated. Part of the differences that can be observed between different age groups is already taken into account through the SOC variable, since it is expected to evolve throughout an individual’s career. To avoid counting this dependency twice, we compute the residual between the results of the initial modelling that does not take into account age and the expected results by age group according to the data. We then deduce a function that modifies a posteriori the estimated salary of an individual depending on their age, so that the salaries sum correctly by age groups. This step is done in sections 2 to 4 of the script.\nTo get the number of hours worked per week, we also use the ASHE Table 15. Since only minimal differences are observed between SOC categories, we simply complete missing values by approximating them by values of the category that is immediately higher within the SOC hierarchy. This step is done in section 5 of the script.\nWhen added to the SPC population data, a basic hourly salary column is added, as well as a corresponding annual salary deduced from the number of worked hours. In addition, we repeat this process for all individuals that are categorised as ‘Self-employed’ or ‘Employee unspecified’ by the Time Use Survey matching,, as if they were full time employees. These values are recorded in the columns IncomeHAsIF and IncomeYAsIf.\n\n\n11.3.2 Comparison to reference values from ONS\nWe compare the results of the modelling to the raw datasets from ONS.\n\nMod for modelled\nM for male\nF for female\nH for hourly gross salary\nY for annual gross salary\nFT for full-Time\nPT for part-Time\nOnly individuals recorded as employees (i.e. not self-employed) are taken into account in this section.\n\nNumber of employees per sex and full-time/part-time classification\nThe numbers given by ONS vary from dataset to dataset and are reported by ONS as indicative only. For the modelled values, we give the total number of individuals with a non-zero salary in each category.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nAll\nFT\nPT\nM\nM FT\nM PT\nF\nF FT\nF PT\n\n\n\n\nONS tot\n22-26k\n16-19k\n6-8k\n11-13k\n9-11k\n1.5-2k\n11-13k\n6.5-7.5k\n4.5-5.5k\n\n\nMod tot H\n23.1k\n18.5k\n4.6k\n11.8k\n11k\n0.8k\n11.3k\n7.5k\n3.8k\n\n\nMod tot Y\n17.6k\n14.8k\n2.8k\n9.4k\n8.9k\n0.5k\n8.2k\n5.9k\n2.3k\n\n\n\nA significant number of individuals listed as working either full or part time have 0 effective worked hours per day according to the Time Use Survey matching. In those cases, an hourly salary is modelled depending on their SOC, region and sex, as for any other employee, but the annual salary will be displayed as 0. It is possible to estimate the likely true number of hours worked from the same ONS dataset (Table 15.9a: Paid hours worked - Total 2020), also depending on their sex, soc and region. This calculation has been added to the “As If” column.\nHourly gross salary per sex and full-time/part-time classification\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nAll\nFT\nPT\nM\nM FT\nM PT\nF\nF FT\nF PT\n\n\n\n\nONS mean\n17.63\n18.32\n13.93\n18.81\n19.12\n14.69\n16.19\n17.08\n13.68\n\n\nONS median\n13.71\n15.15\n10.38\n14.84\n15.58\n10.12\n12.58\n14.42\n10.47\n\n\nMod mean\n16.45\n17.19\n13.45\n17.50\n17.84\n12.75\n15.35\n16.23\n13.60\n\n\nMod median\n13.55\n14.46\n10.23\n14.27\n14.72\n9.16\n12.79\n14.12\n10.51\n\n\n\nThe median values are quite close to the ONS values, but the mean values are always lower. This is expected, see the description of the modelling above.\nAnnual gross salary per sex and full-time/part-time classification\nOnly values &gt; 0 are retained for these calculations.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVariable\nAll\nFT\nPT\nM\nM FT\nM PT\nF\nF FT\nF PT\n\n\n\n\nONS mean\n31,646\n38,552\n13,819\n38,421\n42,072\n14,796\n24,871\n33,253\n13,512\n\n\nONS median\n25,886\n31,487\n11,240\n31,393\n33,915\n10,883\n20,614\n28,002\n4,743\n\n\nMod mean\n34,317\n36,595\n22,257\n37,574\n38,496\n20,698\n30,594\n33,729\n22,585\n\n\nMod median\n28,713\n30,942\n17,928\n31,404\n32,382\n17,382\n25,875\n29,028\n18,137\n\n\n\nThe average salary for part-time employees is correct when values equal to 0 are taken into account. This suggests that the total number of hours worked for part-time employees is correct, but the way they are distributed among individuals is not. It could be due to the TUS taking a snapshot of the situation during a particular week, rather than averaging their data over the year. It appears that the TUS matching also overestimates the average number of hours worked for female employees.\nRegional differences (hourly gross salary)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRegion\nEast\nEast Midlands\nLondon\nNorth East\nNorth West\nSouth East\nSouth West\nWest Midlands\nYorkshire and The Humber\n\n\n\n\nONS mean\n16.74\n15.87\n23.78\n15.69\n16.36\n17.88\n16.36\n16.34\n15.76\n\n\nONS median\n13.28\n12.65\n18.30\n12.40\n12.90\n14.33\n12.74\n12.92\n12.46\n\n\nMod mean\n16.67\n15.29\n19.39\n15.05\n15.22\n17.34\n15.92\n15.47\n14.41\n\n\nMod median\n13.69\n12.79\n16.25\n12.42\n12.44\n14.84\n13.35\n12.64\n12.44\n\n\n\nThe pearson correlations for mean and median between the modelled and raw values are 0.92 and and 0.93.\nHourly gross salary per one-digit SOC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1d SOC\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n\nONS mean\n26.77\n23.38\n18.29\n13.42\n13.35\n10.87\n10.94\n12.23\n10.77\n\n\nONS median\n20.96\n21.34\n15.66\n11.54\n12.04\n10.08\n9.52\n10.93\n9.22\n\n\nMod mean\n21.52\n22.14\n16.00\n12.76\n12.55\n10.49\n10.50\n12.05\n9.87\n\n\nMod median\n17.22\n20.66\n14.12\n11.46\n11.34\n9.71\n9.59\n10.82\n9.12\n\n\n\n\nManagers, directors and senior officials\nProfessional occupations\nAssociate professional and technical occupations\nAdministrative and secretarial occupations\nSkilled trades occupations\nCaring, leisure and other service occupations\nSales and customer service occupations\nProcess, plant and machine operatives\nElementary occupations.\n\nThe Pearson correlations for mean and median between the modelled and raw values are 0.98 and 0.98.\nHourly gross salary per age\nThe reference for this table is: Table 6.5a Hourly pay - Gross 2020\nTable before weighting by age:\n\n\n\nAge\n16-17\n18-21\n22-29\n30-39\n40-49\n50-59\n60+\n\n\n\n\nONS mean\n7.21\n9.59\n14.09\n18.13\n20.04\n19.12\n16.32\n\n\nONS median\n6.36\n9.00\n12.26\n15.08\n15.89\n14.39\n12.17\n\n\nMod mean\n12.77\n14.96\n16.33\n16.93\n16.83\n16.66\n16.29\n\n\nMod median\n10.93\n12.71\n13.88\n14.02\n13.96\n13.85\n13.65\n\n\n\nThe Pearson correlations for mean and median between the modelled and raw values are 0.92 and 0.92.\nTable after weighting by age:\n\n\n\nAge\n16-17\n18-21\n22-29\n30-39\n40-49\n50-59\n60+\n\n\n\n\nONS mean\n7.21\n9.59\n14.09\n18.13\n20.04\n19.12\n16.32\n\n\nONS median\n6.36\n9.00\n12.26\n15.08\n15.89\n14.39\n12.17\n\n\nMod mean\n9.05\n11.15\n14.87\n17.35\n17.96\n17.47\n15.41\n\n\nMod median\n8.20\n9.51\n12.86\n14.41\n14.78\n14.43\n12.56\n\n\n\nThe Pearson correlations for mean and median between the modelled and raw values are 0.99 and 0.99."
  },
  {
    "objectID": "understanding_modelling_methods.html#commuting-flows",
    "href": "understanding_modelling_methods.html#commuting-flows",
    "title": "11  Modelling methods",
    "section": "11.4 Commuting flows",
    "text": "11.4 Commuting flows\n\n11.4.1 List of all workplaces in GB\nIn order to distribute each individual of the population to a unique physical workplace, we first created a population of all individual workplaces in England, based on a combination of the Nomis UK Business Counts 2020 dataset and the Nomis Business register and Employment Survey 2015 (see Data sources). The first dataset gives the number of individual workplace counts per industry, using the SIC 2007 industry classification, with imprecise size (i.e. number of employees) bands at MSOA level. The second dataset gives the total number of jobs available at LSOA level per SIC 2007 industry category. We found that the distribution of workplace sizes follows closely a simple 1/x distribution, allowing us to draw for each workplace a size within their band, with sum constraints given by the total number of jobs available, according to the second dataset. The R codes to create the list of all workplaces can be found here.\n\n\n11.4.2 Usage inside SPC\nThe workplace ‘population’ and individual population are levelled for each SIC 2007 category by removing the exceeding part of whichever dataset lists more items. This takes into account that people and business companies are likely to over-report their working availability (e.g. part time and seasonal contracts are not counted differently than full time contracts, job seekers or people on maternity leave might report the SIC of their last job). This process can be controlled by a threshold in the parameter file that defines the maximal total proportion of workers or jobs that can be removed. If the two datasets cannot be levelled accordingly, the categories are dropped and the datasets are levelled globally. Tests in the West Yorkshire area have shown that when the level 1 SIC, containing 21 unique categories, is used, 90% of the volume of commuting flows were recovered compared to the Nomis commuting OD matrices at MSOA level.\nThe employees for each workplace are drawn according to the ‘universal law of visitation’, see\n\nSchläpfer M et al. The universal visitation law of human mobility. Nature 593, 522–527 (2021). (DOI)\n\nThis framework predicts that visitors to any destination follow a simple\n\nρ(r,f)= K / (rf)2\n\ndistribution, where ρ(r,f) is the density of visitors coming from a distance r with frequency f and K is a balancing constant depending on the specific area. In the context of commuting, it can be assumed that f = 1. Additionally, we only need to weigh potential employees against each other, which removes the necessity to compute explicitly K. In the West Yorkshire test, we found a Pearson coefficient of 0.7 between the predicted flows when aggregated at MSOA level and the OD matrix at MSOA level available from Nomis."
  },
  {
    "objectID": "understanding_data_schema.html#understanding-the-schema",
    "href": "understanding_data_schema.html#understanding-the-schema",
    "title": "12  Data schema",
    "section": "12.1 Understanding the schema",
    "text": "12.1 Understanding the schema\nHere are some helpful tips for understanding the schema.\nEach .pb file contains exactly one Population message. In contrast to datasets consisting of multiple .csv files, just a single file contains everything. Some of the fields in Population are lists (of people and households) or maps (of venues keyed by activity, or of MSOAs). Unlike a flat .csv table, there may be more lists embedded later. Each Household has a list of members, for example.\nThe different objects refer to each other, forming a graph structure. The protobuf uses uint64 IDs to index into other lists. For example, if some household has members = [3, 10], then those two people can be found at population.people[3] and population.people[10]. Each of them will have the same household ID, pointing back to something in the population.households list."
  },
  {
    "objectID": "understanding_data_schema.html#flows-modelling-daily-activites",
    "href": "understanding_data_schema.html#flows-modelling-daily-activites",
    "title": "12  Data schema",
    "section": "12.2 Flows: modelling daily activites",
    "text": "12.2 Flows: modelling daily activites\nSPC models daily travel behavior of people as “flows.” Flows are broken down by by an activity – shopping/retail, attending primary or secondary school, working, or staying at home. For each activity type, a person has a list of venues where they may do that activity, weighted by a probability of going to that particular venue.\nNote that flows_per_activity is stored in InfoPerMSOA, not Person. The flows for retail and school are only known at the MSOA level, not individually. So given a particular Person object, you first look up their household’s MSOA – msoa = population.households[ person.household ].msoa and then look up flows for that MSOA – population.info_per_msoa[msoa].flows_per_activity.\nEach person has exactly 1 flow for home – it’s just person.household with probability 1. A person has 0 or 1 flows to work, based on the value of person.workplace.\nThis doesn’t mean that all people in the same MSOA share the same travel behavior. Each person has their own activity_durations field, based on time-use survey data. Even if two people share the same set of places where they may go shopping, one person may spend much more time on that activity than another.\nSee the ASPICS conversion script for all of this in action – it has a function to collapse a person’s flows down into a single weighted list.\nNote that per MSOA, very few venues are represented as destinations – 10 for retail and 5 for school. Only the most likely venues from QUANT are used."
  },
  {
    "objectID": "understanding_data_schema.html#flow-weights",
    "href": "understanding_data_schema.html#flow-weights",
    "title": "12  Data schema",
    "section": "12.3 Flow weights",
    "text": "12.3 Flow weights\nHow do you interpret the probabilities/weights for flows? If your model needs people to visit specific places each day, you could randomly sample a venue from the flows, weighting them appropriately. For retail, you may want to repeat this sampling every day of the simulation, so they visit different venues. For primary and secondary school, it may be more appropriate to sample once and store that for the simulation – a student probably doesn’t switch schools daily.\nAlternatively, you can follow what ASPICS does. Every day, each person logically visits all possible venues, but their interaction there (possibly receiving or transmitting COVID) is weighted by the probability of each venue."
  },
  {
    "objectID": "understanding_data_sources.html#utility-data",
    "href": "understanding_data_sources.html#utility-data",
    "title": "13  Data sources",
    "section": "13.1 Utility data",
    "text": "13.1 Utility data\n\nlookUp-GB.csv.gz\nThe look-up table links different geographies of Great Britain together. It is used internally by the model, but can also help the user define their own study area. The following are standard denominations, compatible with ONS fields of the same name. They are based on ONS lookups. See ONS documentation for more details.\n\nOA11CD: Output area codes for the 2011 census (120 to 129 households)\nLSOA11CD & LSOA11NM: Lower-layer Super Output Areas (about 2000 individuals), replaced by Intermediary Zones for Scotland\nMSOA11CD,MSOA11NM: Middle-layer Super Output Areas (about 8000 individuals), replaced by Data Zones for Scotland\nLAD20CD, LAD20NM: Local Authority Districts (314 for England, 22 for Wales and 32 for Scotland)\nITL321CD, ITL321NM, ITL221CD, ITL221NM, ITL121CD & ITL121NM: International Territorial Level, replacing pre-Brexit NUTS European divisions.\nRGN20CD & RGN20NM: Regions of England (NA for other Wales and Scotland)\nCountry: England, Wales or Scotland\n\nIn addition,\n\n“AzureRef”: Name of the geographical unit for the County level data folder inside Azure (Lieutenancy Areas – a.k.a. Ceremonial Counties – for England, Scottish Police Divisions and ITL321NM for Wales) For Wales: ITL321NM\n“GoogleMob” & “OSM” are alternate spellings used by Google and OSM for their data releases."
  },
  {
    "objectID": "understanding_data_sources.html#county-level-data",
    "href": "understanding_data_sources.html#county-level-data",
    "title": "13  Data sources",
    "section": "13.2 County level data",
    "text": "13.2 County level data\nFiles in this section are grouped by country (England, Wales and Scotland), then date (2012, 2020, 2022, 2032, 2039). The format of a path to an individual file is:\nhttps://ramp0storage.blob.core.windows.net/countydata-v2-1/[country]/[date]/pop_[area_name].csv.gz\nAs of July 2023, England contains 5 series of 47 files, Wales 5 series of 12 files and Scotland 5 series of 13 files\n\npop_.csv.gz\nThe data is mainly based on the 2011 UK census, the UK Time Use Survey 2014-15 and the health surveys of GB (England, Wales, Scotland). The SPENSER (Synthetic Population Estimation and Scenario Projection) microsimulation model (ref) distributes individuals from the census with MSOA scale constraints into synthetic households with OA constraints. It is able to project this synthetic population in the future according to estimates from the Office for National Statistics (ONS). These data were enriched with some of the content of the other datasets mentioned (the rest of which can be added a posteriori from the identifiers provided). The data have also been complented with a modelling of BMI and salaries. The methods used to join the different datasets are explained in the methods.\nThe fields currently contained are detailed here. They are:\n\npid: Unique person identifier at GB level within SPC\nhid: Unique household identifier at GB level within SPC\nOA11CD: Output Area code of the individual’s home (ONS, 2011 boundaries)\nsex: Sex assigned at birth (DC1117EW, census 2011)\nage: Age in years (DC1117EW, census 2011)\nethnicity: Based on self-report (aggregated from DC2101EW, census 2011)\nnssec8: National Statistics Socio-economic classification (see methods)\nHOUSE_nssec8: National Statistics Socio-economic classification of the reference person of the household (LC4605, census 2011)\nHouse_type: Type of accommodation (based on LC4402EW, census 2011)\nHOUSE_typeCommunal: Type of communal establishment (based on QS420, census 2011)\nHOUSE_NRooms: Number of rooms in the accommodation (LC4404EW, census 2011)\nHOUSE_centralHeat: Presence of central heating (based on LC4402EW, census 2011)\nHOUSE_tenure: Tenure (based on LC4402EW, census 2011)\nHOUSE_NCars: Number of cars (derived from LC4202EW by SPENSER team, census 2011)\nid_HS: unique identifier within the Health Survey (aggregated from the Health surveys from England, Wales and Scotland)\nHEALTH_diabetes: for Scotland and England, has doctor diagnosed diabetes; for Wales, diabetes currently treated (derived from HSE, HSW, SHS)\nHEALTH_bloodpressure: for Scotland and England, Doctor diagnosed high blood pressure; for Wales, high blood pressure currently treated (derived from HSE, HSW, SHS)\nHEALTH_cvd: for England, cardiovascular medication taken in the last 7 days; for Scotland, had cardiovascular condition excluding diabetes / blood pressure; for Wales, any heart condition excluding high blood pressure (derived from HSE, HSW, SHS)\nHEALTH_NMedecines: Number of prescribed medications (derived from HSE, HSW, SHS)\nHEALTH_selfAssessed: Self assessed general health (derived from HSE, HSW, SHS)\nHEALTH_lifeSat: how satisfied with life nowadays? (derived from HSE, HSW, SHS)\nHEALTH_bmi: BMI (see methods)\nid_TUS_hh: serial household identifier field in the UK Time Use Survey 2015\nid_TUS_p: pnum person identifier field in the UK Time Use Survey 2015\npwkstat: Employment status (derived from UK TUS 2015)\nsoc2010: Standard Occupational Classification (derived from UK TUS 2015)\nsic1d2007: Standard Industry Classification of economic activities 2007, 1st level (derived from UK TUS 2015)\nsic2d2007: Standard Industry Classification of economic activities 2007, 2nd level (derived from UK TUS 2015)\nnetPayWeekly: Weekly take home pay after all deductions (derived from UK TUS 2015)\nworkedHoursWeekly: Number of hours per week usually worked in main job or business (derived from UK TUS 2015)\nincomeH: Hourly gross salary for full-time and part-time employees (see methods)\nincomeY: Yearly gross salary for full-time and part-time employees (see methods)\nincomeHAsIf: Hourly gross salary for employees with self employed/other employees as employees of the same industry and with mean hourly worked for the industry when the number of hours is missing (see methods)\nincomeYAsIf: Yearly gross salary for employees with self employed/other employees as employees of the same industry and with mean hourly worked for the industry when the number of hours is missing (see methods)\nESport: Relative probability weight to attend a sport fixture (Experimental, WIP)\nERugby: Relative probability weight to attend a Rugby fixture (Experimental, WIP)\nEConcertM: Relative probability weight to attend a concert primarily targeting young males (Experimental, WIP)\nEConcertF: Relative probability weight to attend a concert primarily targeting young females (Experimental, WIP)\nEConcertMS: Relative probability weight to attend a concert primarily targeting middle-aged males (Experimental, WIP)\nEConcertMS: Relative probability weight to attend a concert primarily targeting middle-aged females (Experimental, WIP)\nEMuseum: Relative probability weight to visit a museum (Experimental, WIP)\neasting: X coordinate of the OA centroid in the British National Grid coordinate system (epsg:27700, source: ONS)\nnorthing: Y coordinate of the OA centroid in the British National Grid coordinate system (epsg:27700, source: ONS)\nlng: X coordinate of the OA centroid in the Longitude/Latitude coordinate system (epsg:4326, derived from ONS)\nlat: Y coordinate of the OA centroid in the Longitude/Latitude coordinate system (epsg:4326, derived from ONS)"
  },
  {
    "objectID": "understanding_data_sources.html#national-data",
    "href": "understanding_data_sources.html#national-data",
    "title": "13  Data sources",
    "section": "13.3 National data",
    "text": "13.3 National data\n\nbusinessRegistry.csv.gz\nContains a breakdown of all business units (i.e. a single workplace) in Great Britain at LSOA scale, estimated by the project contributors from two nomis datasets: UK Business Counts - local units by industry and employment size band 2020 and Business Register and Employment Survey 2015. Each item contains the size of the unit and its main sic1d07 code in reference to standard Industrial Classification of Economic Activities 2007 (number corresponding to the letter in alphabetical order). It is used to compute commuting flows.\n\n\nGIS/\nContains three GIS datasets of GB in GeoJson format taken from ONS boundaries:\n\nOA_2011_Pop20.geojson at OA level\nLSOA_2011_Pop20.geojson at LSOA level\nMSOA_2011_Pop20.geojson at MSOA level\n\n\n\nQUANT_RAMP_spc.tar.gz\nSee: Milton R, Batty M, Dennett A, dedicated RAMP Spatial Interaction Model GitHub repository. It is used to compute the flows towards schools and retail.\n\n\ntimeAtHomeIncreaseCTY.csv.gz\nThis file is a subset from Google COVID-19 Community Mobility Reports, cropped to GB. It describes the daily reduction in mobility, averaged at county level, due to lockdown and other COVID-19 restrictions between the 15th of February 2020 and 15th of October 2022. Missing values have been replaced by the national average. These values can be used directly to reduce pnothome and increase phometot (and their sub-categories) to simulate more accurately the period.\n\n\ndiariesRef.csv.gz\nContains diaries taken from the UK TUS that can be distributed to the population on a daily basis. They contain weekend days and weekday days. A full description of the fields can be found here."
  },
  {
    "objectID": "advanced_developer_guide.html#updating-the-docs",
    "href": "advanced_developer_guide.html#updating-the-docs",
    "title": "14  Developer guide",
    "section": "14.1 Updating the docs",
    "text": "14.1 Updating the docs\nThe site is built with Quarto. You can iterate on it locally: cd docs; quarto preview"
  },
  {
    "objectID": "advanced_developer_guide.html#code-hygiene",
    "href": "advanced_developer_guide.html#code-hygiene",
    "title": "14  Developer guide",
    "section": "14.2 Code hygiene",
    "text": "14.2 Code hygiene\nWe use automated tools to format the code.\ncargo fmt\n\n# Format Markdown docs\nprettier --write *.md\nprettier --write docs/*.qmd --parser markdown\nInstall prettier for Markdown."
  },
  {
    "objectID": "advanced_developer_guide.html#some-tips-for-working-with-rust",
    "href": "advanced_developer_guide.html#some-tips-for-working-with-rust",
    "title": "14  Developer guide",
    "section": "14.3 Some tips for working with Rust",
    "text": "14.3 Some tips for working with Rust\nThere are two equivalent ways to rebuild and then run the code. First:\ncargo run --release -- devon\nThe -- separates arguments to cargo, the Rust build tool, and arguments to the program itself. The second way:\ncargo build --release\n./target/release/aspics devon\nYou can build the code in two ways – debug and release. There’s a simple tradeoff – debug mode is fast to build, but slow to run. Release mode is slow to build, but fast to run. For the ASPICS codebase, since the input data is so large and the codebase so small, I’d recommend always using --release. If you want to use debug mode, just omit the flag.\nIf you’re working on the Rust code outside of an IDE like VSCode, then you can check if the code compiles much faster by doing cargo check."
  },
  {
    "objectID": "advanced_developer_guide.html#docker",
    "href": "advanced_developer_guide.html#docker",
    "title": "14  Developer guide",
    "section": "14.4 Docker",
    "text": "14.4 Docker\nWe provide a Dockerfile in case it’s helpful for running, but don’t recommend using it. If you want to, then assuming you have Docker setup:\ndocker build -t spc .\ndocker run --mount type=bind,source=\"$(pwd)\"/data,target=/spc/data -t spc /spc/target/release/spc config/bristol.txt\nThis will make the data directory in your directory available to the Docker image, where it’ll download the large input files and produce the final output."
  },
  {
    "objectID": "advanced_code_walkthrough.html#generally-useful-techniques",
    "href": "advanced_code_walkthrough.html#generally-useful-techniques",
    "title": "15  Code walkthrough",
    "section": "15.1 Generally useful techniques",
    "text": "15.1 Generally useful techniques\nThe code-base makes use of some techniques that may be generally applicable to other projects, independent of the language chosen.\n\n15.1.1 Split code into two stages\nAgent-based models and spatial interaction models require some kind of input. Often the effort to transform external data into this input can exceed that of the simulation component. Cleanly separating the two problems has some advantages:\n\niterate on the simulation faster, without processing raw data every run\nreuse the prepared input for future projects\nforce thinking about the data model needed by the simulation, and transform the external data into that form\n\nSPC is exactly this first stage, originally split from ASPICS when further uses of the same population data were identified.\n\n\n15.1.2 Explicit data schema\nDynamically typed languages like Python don’t force you to explicitly list the shape of input data. It’s common to read CSV files with pandas, filter and transform the data, and use that throughout the program. This can be quick to start prototyping, but is hard to maintain longer-term. Investing in the process of writing down types:\n\nmakes it easier for somebody new to understand your system – they can first focus on what you’re modeling, instead of how that’s built up from raw data sources\nclarifies what data actually matters to your system; you don’t carry forward unnecessary input\nmakes it impossible to express invalid states\n\nOne example is here – per person and activity, there’s a list of venues the person may visit, along with a probability of going there. If the list of venues and list of probabilities are stored as separate lists or columns, then their length may not match.\n\nreuse the prepared input for future projects\n\nThere’s a variety of techniques for expressing strongly typed data:\n\nprotocol buffers or flatbuffers\nJSON schemas\nPython data classes and optional type hints\nstatically typed languages like Rust\n\n\n\n15.1.3 Type-safe IDs\nSay your data model has many different objects, each with their own ID – people, households, venues, etc. You might store these in a list and use the index as an ID. This is fine, but nothing stops you from confusing IDs and accidentally passing in venue 5 to a function instead of household 5. In Rust, it’s easy to create “wrapper types” like this and let the compiler prevent these mistakes.\nThis technique is also useful when preparing external data. GTFS data describing public transit routes and timetables contains many string IDs – shapes, trips, stops, routes. As soon as you read the raw input, you can store the strings in more precise types that prevent mixing up a stop ID and route ID.\n\n\n15.1.4 Idempotent data preparation\nIf you’re iterating on your initialisation pipeline’s code, you probably don’t want to download a 2GB external file every single run. A common approach is to first test if a file exists and don’t download it again if so. In practice, you may also need to handle unzipping files, showing a progress bar while downloading, and printing clear error messages. This codebase has some common code for doing this in Rust. We intend to publish a separate library to more easily call in your own code.\n\n\n15.1.5 Logging with structure\nIt’s typical to print information as a complex pipeline runs, for the user to track progress and debug problems. But without any sort of organization, it’s hard to follow what steps take a long time or encounter problems. What if your logs could show the logical structure of your pipeline and help you understand where time is spent?\n\nThe screenshot above shows a summary printed at the end of a long pipeline run. It’s immediately obvious that the slowest step is creating commuting flows.\nThis codebase uses the tracing framework for logging, with a custom piece to draw the tree. (We’ll publish this as a separate library once it’s more polished.) The tracing framework is hard to understand, but the main conceptual leap over regular logging framworks is the concept of a span. When your code starts one logical step, you call a method to create a new span, and when it finishes, you close that span. Spans can be nested in any way – create_commuting_flows happens within the larger step of creating population.\n\n\n15.1.6 Determinism\nGiven the same inputs, your code should always produce identical output, no matter where it’s run or how many times. Otherwise, debugging problems becomes very tedious, and it’s more difficult to make conclusions from results. Of course, many projects have a stochastic element – but this should be controlled by a random number generator (RNG) seed, which is part of the input. You vary the seed and repeat the program, then reason about the distribution of results.\nAside from organizing your code to let a single RNG seed influence everything, another possible source of non-determinism is iteration order. In Rust, a HashMap could have different order every time it’s used, so we use a BTreeMap instead when this matters. In Python, dictionaries are ordered. Be sure to check for your language."
  },
  {
    "objectID": "advanced_code_walkthrough.html#protocol-buffers",
    "href": "advanced_code_walkthrough.html#protocol-buffers",
    "title": "15  Code walkthrough",
    "section": "15.2 Protocol buffers",
    "text": "15.2 Protocol buffers\nSPC uses protocol buffers v2 for output. This has some advantages explained the “explicit data schema” section above.\nNote that we chose proto2 instead of proto3, because proto3 doesn’t support required fields. This is done to allow schemas to evolve better over time, but this isn’t a feature SPC makes use of. There’s no need to have new code work with old data, or vice versa – if the schema is updated, downstream code should adapt accordingly and use the updated input files.\nNote also that protocol buffers don’t easily support type-safe wrappers around numeric IDs, so downstream code has to be careful not to mix up household, venue, and person IDs. For this reason, SPC internally doesn’t use the auto-generated protobuf code until the very end of the pipeline. It’s always possible to be more precise with native Rust types, and convert to the less strict types later."
  },
  {
    "objectID": "advanced_code_walkthrough.html#an-example-of-the-power-of-static-type-checking",
    "href": "advanced_code_walkthrough.html#an-example-of-the-power-of-static-type-checking",
    "title": "15  Code walkthrough",
    "section": "15.3 An example of the power of static type checking",
    "text": "15.3 An example of the power of static type checking\nImagine we want to add a new activity type to represent people going to university and higher education. SPC already has activities for primary and secondary school, so we’ll probably want to follow those as a guide. In any language, we could search the codebase for relevant terms to get a sense of what to update. In languages like Python without an up-front compilation step, if we fail to update something or write blatantly incorrect code (such as making a typo in variable names or passing a list where a string was expected), we only find out when that code happens to run. In pipelines with many steps and large input files, it could be a while before we reach the problematic code.\nLet’s walk through the same exercise for SPC’s Rust code. We start by adding a new University case to the Activity enum. If we try to compile the code here (with cargo check or an IDE), we immediately get 4 errors.\n\nThree of the errors are in the QUANT module. The first is here. It’s immediately clear that for retail and primary/secondary school, we read in two files from QUANT representing venues where these activities take place and the probability of going to each venue. Even if we were unfamiliar with this codebase, the compiler has told us one thing we’ll need to figure out, and where to wire it up.\n\nThe other error is in the code that writes the protobuf output. Similarly, we need a way to represent university activities in the protobuf scheme.\nExtending an unfamiliar code-base backed by compiler errors is a very guided experience. If you wanted to add more demographic attributes to people or energy use information to households, you don’t need to guess all of the places in the code you’ll need to update. You can just add the field, then let the compiler tell you all places where those objects get created."
  },
  {
    "objectID": "advanced_performance.html",
    "href": "advanced_performance.html",
    "title": "16  Performance",
    "section": "",
    "text": "The following table summarizes the resources SPC needs to run in different areas.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nYear\nArea\nMSOAs\nHouseholds\nIndividuals\nPb_file_size\nRuntime\n(Commute)\nMemory_use\n\n\n\n\n2012\nEngland/bedfordshire\n74\n245,166\n647,272\n256.91 MiB\n7 sec\n2 sec\n848.99 MiB\n\n\n2020\nEngland/bedfordshire\n74\n272,875\n674,044\n271.73 MiB\n7 sec\n2 sec\n922.86 MiB\n\n\n2022\nEngland/bedfordshire\n74\n309,706\n703,582\n277.82 MiB\n7 sec\n2 sec\n929.78 MiB\n\n\n2032\nEngland/bedfordshire\n74\n309,706\n703,582\n277.82 MiB\n7 sec\n2 sec\n929.78 MiB\n\n\n2039\nEngland/bedfordshire\n74\n329,061\n715,797\n278.47 MiB\n7 sec\n2 sec\n927.74 MiB\n\n\n2012\nEngland/berkshire\n107\n342,167\n890,543\n356.08 MiB\n10 sec\n4 sec\n1.06 GiB\n\n\n2020\nEngland/berkshire\n107\n365,905\n918,258\n373.39 MiB\n10 sec\n4 sec\n1.10 GiB\n\n\n2022\nEngland/berkshire\n107\n394,446\n941,655\n368.41 MiB\n10 sec\n4 sec\n1.08 GiB\n\n\n2032\nEngland/berkshire\n107\n394,446\n941,655\n368.41 MiB\n10 sec\n4 sec\n1.08 GiB\n\n\n2039\nEngland/berkshire\n107\n408,604\n949,986\n367.25 MiB\n10 sec\n4 sec\n1.07 GiB\n\n\n2012\nEngland/bristol\n55\n182,299\n448,233\n173.75 MiB\n5 sec\n1 sec\n527.15 MiB\n\n\n2020\nEngland/bristol\n55\n196,940\n470,039\n184.00 MiB\n5 sec\n1 sec\n547.40 MiB\n\n\n2022\nEngland/bristol\n55\n216,197\n503,014\n192.51 MiB\n5 sec\n1 sec\n559.70 MiB\n\n\n2032\nEngland/bristol\n55\n216,197\n503,014\n192.51 MiB\n6 sec\n1 sec\n559.70 MiB\n\n\n2039\nEngland/bristol\n55\n227,770\n521,371\n199.73 MiB\n6 sec\n1 sec\n573.32 MiB\n\n\n2012\nEngland/buckinghamshire\n99\n301,486\n786,221\n314.40 MiB\n9 sec\n3 sec\n1007.27 MiB\n\n\n2020\nEngland/buckinghamshire\n99\n327,554\n816,518\n331.16 MiB\n9 sec\n3 sec\n1.02 GiB\n\n\n2022\nEngland/buckinghamshire\n99\n333,801\n824,863\n334.87 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2032\nEngland/buckinghamshire\n99\n363,840\n844,684\n331.67 MiB\n9 sec\n3 sec\n1.01 GiB\n\n\n2039\nEngland/buckinghamshire\n99\n381,583\n855,739\n332.20 MiB\n9 sec\n3 sec\n1.01 GiB\n\n\n2012\nEngland/cambridgeshire\n98\n327,257\n832,980\n323.39 MiB\n9 sec\n3 sec\n1013.07 MiB\n\n\n2020\nEngland/cambridgeshire\n98\n348,522\n863,250\n341.20 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2022\nEngland/cambridgeshire\n98\n377,634\n907,166\n348.79 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2032\nEngland/cambridgeshire\n98\n377,634\n907,166\n348.79 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2039\nEngland/cambridgeshire\n98\n392,478\n924,170\n351.43 MiB\n9 sec\n3 sec\n1.04 GiB\n\n\n2012\nEngland/cheshire\n139\n441,084\n1,042,065\n402.31 MiB\n12 sec\n4 sec\n1.13 GiB\n\n\n2020\nEngland/cheshire\n139\n464,134\n1,070,597\n416.52 MiB\n12 sec\n4 sec\n1.46 GiB\n\n\n2022\nEngland/cheshire\n139\n489,476\n1,125,198\n425.44 MiB\n12 sec\n4 sec\n1.47 GiB\n\n\n2032\nEngland/cheshire\n139\n489,476\n1,125,198\n425.44 MiB\n12 sec\n4 sec\n1.47 GiB\n\n\n2039\nEngland/cheshire\n139\n501,501\n1,149,515\n431.28 MiB\n12 sec\n4 sec\n1.48 GiB\n\n\n2012\nEngland/cornwall\n74\n233,710\n551,951\n208.93 MiB\n7 sec\n2 sec\n744.32 MiB\n\n\n2020\nEngland/cornwall\n74\n248,145\n579,460\n220.51 MiB\n7 sec\n2 sec\n766.20 MiB\n\n\n2022\nEngland/cornwall\n74\n251,934\n590,365\n224.28 MiB\n7 sec\n2 sec\n773.13 MiB\n\n\n2032\nEngland/cornwall\n74\n271,147\n636,573\n234.01 MiB\n7 sec\n2 sec\n829.51 MiB\n\n\n2039\nEngland/cornwall\n74\n281,563\n660,164\n240.35 MiB\n7 sec\n2 sec\n839.16 MiB\n\n\n2012\nEngland/cumbria\n64\n222,586\n498,624\n188.07 MiB\n6 sec\n1 sec\n547.25 MiB\n\n\n2020\nEngland/cumbria\n64\n226,893\n499,873\n188.76 MiB\n6 sec\n1 sec\n548.43 MiB\n\n\n2022\nEngland/cumbria\n64\n230,206\n499,840\n183.22 MiB\n6 sec\n1 sec\n533.91 MiB\n\n\n2032\nEngland/cumbria\n64\n230,206\n499,840\n183.22 MiB\n6 sec\n1 sec\n533.91 MiB\n\n\n2039\nEngland/cumbria\n64\n231,202\n498,475\n181.62 MiB\n6 sec\n1 sec\n530.88 MiB\n\n\n2012\nEngland/derbyshire\n131\n436,276\n1,035,356\n397.76 MiB\n11 sec\n4 sec\n1.12 GiB\n\n\n2020\nEngland/derbyshire\n131\n459,743\n1,064,406\n409.77 MiB\n11 sec\n4 sec\n1.44 GiB\n\n\n2022\nEngland/derbyshire\n131\n489,764\n1,122,078\n419.53 MiB\n12 sec\n4 sec\n1.45 GiB\n\n\n2032\nEngland/derbyshire\n131\n489,764\n1,122,078\n419.53 MiB\n12 sec\n4 sec\n1.45 GiB\n\n\n2039\nEngland/derbyshire\n131\n505,314\n1,152,518\n429.02 MiB\n12 sec\n4 sec\n1.47 GiB\n\n\n2012\nEngland/devon\n156\n494,106\n1,165,952\n438.76 MiB\n13 sec\n4 sec\n1.49 GiB\n\n\n2020\nEngland/devon\n156\n523,033\n1,212,387\n459.60 MiB\n13 sec\n4 sec\n1.53 GiB\n\n\n2022\nEngland/devon\n156\n567,011\n1,304,874\n478.87 MiB\n14 sec\n4 sec\n1.64 GiB\n\n\n2032\nEngland/devon\n156\n567,011\n1,304,874\n478.87 MiB\n14 sec\n5 sec\n1.64 GiB\n\n\n2039\nEngland/devon\n156\n589,178\n1,342,775\n488.39 MiB\n14 sec\n5 sec\n1.66 GiB\n\n\n2012\nEngland/dorset\n95\n328,906\n761,766\n285.99 MiB\n8 sec\n2 sec\n931.64 MiB\n\n\n2020\nEngland/dorset\n95\n345,862\n777,887\n295.20 MiB\n8 sec\n2 sec\n951.30 MiB\n\n\n2022\nEngland/dorset\n95\n350,392\n782,725\n296.83 MiB\n8 sec\n2 sec\n955.86 MiB\n\n\n2032\nEngland/dorset\n95\n375,160\n802,953\n294.92 MiB\n8 sec\n2 sec\n945.43 MiB\n\n\n2039\nEngland/dorset\n95\n389,694\n810,856\n294.90 MiB\n8 sec\n2 sec\n945.59 MiB\n\n\n2012\nEngland/durham\n117\n390,472\n911,601\n349.81 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2020\nEngland/durham\n117\n407,828\n930,184\n359.62 MiB\n9 sec\n3 sec\n1.05 GiB\n\n\n2022\nEngland/durham\n117\n425,611\n952,801\n356.65 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2032\nEngland/durham\n117\n425,611\n952,801\n356.65 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2039\nEngland/durham\n117\n434,593\n959,555\n357.69 MiB\n9 sec\n3 sec\n1.04 GiB\n\n\n2012\nEngland/east-sussex\n102\n355,257\n827,703\n313.77 MiB\n9 sec\n3 sec\n987.24 MiB\n\n\n2020\nEngland/east-sussex\n102\n380,894\n853,970\n324.07 MiB\n9 sec\n3 sec\n1006.06 MiB\n\n\n2022\nEngland/east-sussex\n102\n423,181\n895,907\n329.61 MiB\n9 sec\n3 sec\n1008.52 MiB\n\n\n2032\nEngland/east-sussex\n102\n423,181\n895,907\n329.61 MiB\n9 sec\n3 sec\n1008.52 MiB\n\n\n2039\nEngland/east-sussex\n102\n446,000\n915,014\n335.50 MiB\n9 sec\n3 sec\n1020.68 MiB\n\n\n2012\nEngland/east-yorkshire-with-hull\n75\n255,848\n593,271\n227.51 MiB\n7 sec\n2 sec\n778.67 MiB\n\n\n2020\nEngland/east-yorkshire-with-hull\n75\n262,609\n602,286\n233.16 MiB\n7 sec\n2 sec\n834.96 MiB\n\n\n2022\nEngland/east-yorkshire-with-hull\n75\n272,805\n613,721\n230.36 MiB\n7 sec\n2 sec\n824.41 MiB\n\n\n2032\nEngland/east-yorkshire-with-hull\n75\n272,805\n613,721\n230.36 MiB\n7 sec\n2 sec\n824.42 MiB\n\n\n2039\nEngland/east-yorkshire-with-hull\n75\n277,770\n617,357\n230.47 MiB\n7 sec\n2 sec\n824.92 MiB\n\n\n2012\nEngland/essex\n211\n722,974\n1,786,310\n690.86 MiB\n19 sec\n9 sec\n2.06 GiB\n\n\n2020\nEngland/essex\n211\n773,454\n1,857,205\n726.11 MiB\n20 sec\n9 sec\n2.13 GiB\n\n\n2022\nEngland/essex\n211\n858,552\n1,981,994\n761.49 MiB\n21 sec\n9 sec\n2.19 GiB\n\n\n2032\nEngland/essex\n211\n858,552\n1,981,994\n761.49 MiB\n21 sec\n10 sec\n2.19 GiB\n\n\n2039\nEngland/essex\n211\n906,640\n2,042,404\n777.80 MiB\n22 sec\n10 sec\n2.21 GiB\n\n\n2012\nEngland/gloucestershire\n107\n365,240\n889,836\n344.21 MiB\n10 sec\n3 sec\n1.02 GiB\n\n\n2020\nEngland/gloucestershire\n107\n392,643\n933,909\n362.94 MiB\n11 sec\n3 sec\n1.06 GiB\n\n\n2022\nEngland/gloucestershire\n107\n432,216\n1,025,077\n389.60 MiB\n11 sec\n3 sec\n1.10 GiB\n\n\n2032\nEngland/gloucestershire\n107\n432,216\n1,025,077\n389.60 MiB\n11 sec\n3 sec\n1.10 GiB\n\n\n2039\nEngland/gloucestershire\n107\n453,383\n1,068,484\n403.92 MiB\n11 sec\n3 sec\n1.43 GiB\n\n\n2012\nEngland/greater-london\n983\n3,287,651\n8,587,955\n3.28 GiB\n5 min\n4 min\n11.80 GiB\n\n\n2020\nEngland/greater-london\n983\n3,578,616\n8,992,494\n3.48 GiB\n5 min\n4 min\n12.22 GiB\n\n\n2022\nEngland/greater-london\n983\n3,645,459\n9,105,919\n3.53 GiB\n5 min\n4 min\n12.31 GiB\n\n\n2032\nEngland/greater-london\n983\n4,001,897\n9,461,273\n3.55 GiB\n5 min\n5 min\n12.26 GiB\n\n\n2039\nEngland/greater-london\n983\n4,233,367\n9,697,960\n3.59 GiB\n6 min\n5 min\n12.96 GiB\n\n\n2012\nEngland/greater-manchester\n346\n1,128,371\n2,745,455\n1.05 GiB\n40 sec\n26 sec\n3.56 GiB\n\n\n2020\nEngland/greater-manchester\n346\n1,192,547\n2,840,431\n1.10 GiB\n41 sec\n27 sec\n3.66 GiB\n\n\n2022\nEngland/greater-manchester\n346\n1,272,689\n2,974,954\n1.13 GiB\n43 sec\n27 sec\n3.69 GiB\n\n\n2032\nEngland/greater-manchester\n346\n1,272,689\n2,974,954\n1.13 GiB\n43 sec\n28 sec\n3.69 GiB\n\n\n2039\nEngland/greater-manchester\n346\n1,319,090\n3,049,727\n1.15 GiB\n45 sec\n29 sec\n3.73 GiB\n\n\n2012\nEngland/hampshire\n225\n733,611\n1,810,518\n698.19 MiB\n21 sec\n10 sec\n2.07 GiB\n\n\n2020\nEngland/hampshire\n225\n777,116\n1,861,250\n721.78 MiB\n21 sec\n10 sec\n2.12 GiB\n\n\n2022\nEngland/hampshire\n225\n836,451\n1,931,669\n729.13 MiB\n21 sec\n10 sec\n2.12 GiB\n\n\n2032\nEngland/hampshire\n225\n836,451\n1,931,669\n729.13 MiB\n21 sec\n10 sec\n2.12 GiB\n\n\n2039\nEngland/hampshire\n225\n867,417\n1,960,190\n735.66 MiB\n22 sec\n10 sec\n2.13 GiB\n\n\n2012\nEngland/herefordshire\n23\n79,083\n188,362\n72.22 MiB\n3 sec\n1 sec\n234.79 MiB\n\n\n2020\nEngland/herefordshire\n23\n83,238\n195,194\n74.72 MiB\n3 sec\n1 sec\n239.26 MiB\n\n\n2022\nEngland/herefordshire\n23\n89,574\n209,784\n77.64 MiB\n3 sec\n1 sec\n242.72 MiB\n\n\n2032\nEngland/herefordshire\n23\n89,574\n209,784\n77.64 MiB\n3 sec\n1 sec\n242.72 MiB\n\n\n2039\nEngland/herefordshire\n23\n92,605\n216,508\n79.44 MiB\n3 sec\n1 sec\n245.59 MiB\n\n\n2012\nEngland/hertfordshire\n153\n457,276\n1,160,155\n458.74 MiB\n13 sec\n5 sec\n1.56 GiB\n\n\n2020\nEngland/hertfordshire\n153\n494,661\n1,190,043\n477.27 MiB\n13 sec\n5 sec\n1.59 GiB\n\n\n2022\nEngland/hertfordshire\n153\n546,573\n1,219,124\n476.65 MiB\n13 sec\n5 sec\n1.67 GiB\n\n\n2032\nEngland/hertfordshire\n153\n546,573\n1,219,124\n476.65 MiB\n13 sec\n5 sec\n1.67 GiB\n\n\n2039\nEngland/hertfordshire\n153\n575,179\n1,233,573\n477.07 MiB\n13 sec\n5 sec\n1.67 GiB\n\n\n2012\nEngland/isle-of-wight\n18\n61,636\n139,732\n53.88 MiB\n3 sec\n1 sec\n188.67 MiB\n\n\n2020\nEngland/isle-of-wight\n18\n65,140\n143,268\n54.99 MiB\n3 sec\n1 sec\n190.34 MiB\n\n\n2022\nEngland/isle-of-wight\n18\n70,496\n151,582\n55.55 MiB\n3 sec\n1 sec\n200.88 MiB\n\n\n2032\nEngland/isle-of-wight\n18\n70,496\n151,582\n55.55 MiB\n3 sec\n1 sec\n200.88 MiB\n\n\n2039\nEngland/isle-of-wight\n18\n72,968\n154,841\n56.14 MiB\n3 sec\n1 sec\n202.02 MiB\n\n\n2012\nEngland/kent\n220\n718,544\n1,793,702\n700.26 MiB\n19 sec\n8 sec\n2.08 GiB\n\n\n2020\nEngland/kent\n220\n781,933\n1,873,451\n737.36 MiB\n20 sec\n9 sec\n2.15 GiB\n\n\n2022\nEngland/kent\n220\n875,515\n2,008,857\n773.40 MiB\n20 sec\n9 sec\n2.21 GiB\n\n\n2032\nEngland/kent\n220\n875,515\n2,008,857\n773.40 MiB\n20 sec\n9 sec\n2.21 GiB\n\n\n2039\nEngland/kent\n220\n926,571\n2,069,087\n788.63 MiB\n21 sec\n9 sec\n2.23 GiB\n\n\n2012\nEngland/lancashire\n191\n619,861\n1,476,469\n572.04 MiB\n16 sec\n7 sec\n1.83 GiB\n\n\n2020\nEngland/lancashire\n191\n640,196\n1,511,896\n589.88 MiB\n16 sec\n7 sec\n1.87 GiB\n\n\n2022\nEngland/lancashire\n191\n663,637\n1,567,390\n594.59 MiB\n16 sec\n7 sec\n1.87 GiB\n\n\n2032\nEngland/lancashire\n191\n663,637\n1,567,390\n594.59 MiB\n16 sec\n7 sec\n1.87 GiB\n\n\n2039\nEngland/lancashire\n191\n674,387\n1,591,908\n600.12 MiB\n17 sec\n7 sec\n1.88 GiB\n\n\n2012\nEngland/leicestershire\n120\n391,605\n1,014,485\n394.46 MiB\n10 sec\n4 sec\n1.12 GiB\n\n\n2020\nEngland/leicestershire\n120\n418,618\n1,073,842\n419.67 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2022\nEngland/leicestershire\n120\n424,923\n1,092,677\n426.66 MiB\n11 sec\n4 sec\n1.49 GiB\n\n\n2032\nEngland/leicestershire\n120\n460,335\n1,178,746\n449.47 MiB\n12 sec\n5 sec\n1.52 GiB\n\n\n2039\nEngland/leicestershire\n120\n482,373\n1,225,824\n464.68 MiB\n12 sec\n4 sec\n1.55 GiB\n\n\n2012\nEngland/lincolnshire\n134\n449,394\n1,064,403\n403.11 MiB\n11 sec\n4 sec\n1.43 GiB\n\n\n2020\nEngland/lincolnshire\n134\n475,646\n1,098,403\n419.38 MiB\n11 sec\n4 sec\n1.46 GiB\n\n\n2022\nEngland/lincolnshire\n134\n507,295\n1,152,299\n427.62 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2032\nEngland/lincolnshire\n134\n507,295\n1,152,299\n427.62 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2039\nEngland/lincolnshire\n134\n523,548\n1,172,923\n430.89 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2012\nEngland/merseyside\n184\n603,483\n1,399,209\n533.99 MiB\n14 sec\n6 sec\n1.75 GiB\n\n\n2020\nEngland/merseyside\n184\n632,617\n1,435,755\n553.36 MiB\n14 sec\n6 sec\n1.79 GiB\n\n\n2022\nEngland/merseyside\n184\n665,766\n1,498,518\n570.24 MiB\n14 sec\n6 sec\n1.82 GiB\n\n\n2032\nEngland/merseyside\n184\n665,766\n1,498,518\n570.24 MiB\n14 sec\n6 sec\n1.82 GiB\n\n\n2039\nEngland/merseyside\n184\n685,165\n1,528,037\n577.51 MiB\n15 sec\n6 sec\n1.83 GiB\n\n\n2012\nEngland/norfolk\n110\n374,491\n882,793\n333.12 MiB\n10 sec\n3 sec\n1017.08 MiB\n\n\n2020\nEngland/norfolk\n110\n397,770\n916,799\n348.46 MiB\n10 sec\n3 sec\n1.02 GiB\n\n\n2022\nEngland/norfolk\n110\n432,187\n982,755\n362.33 MiB\n10 sec\n3 sec\n1.04 GiB\n\n\n2032\nEngland/norfolk\n110\n432,187\n982,755\n362.33 MiB\n10 sec\n3 sec\n1.04 GiB\n\n\n2039\nEngland/norfolk\n110\n450,068\n1,013,214\n371.44 MiB\n10 sec\n3 sec\n1.06 GiB\n\n\n2012\nEngland/north-yorkshire\n138\n460,050\n1,085,067\n413.12 MiB\n12 sec\n4 sec\n1.45 GiB\n\n\n2020\nEngland/north-yorkshire\n138\n478,639\n1,107,928\n423.25 MiB\n12 sec\n4 sec\n1.47 GiB\n\n\n2022\nEngland/north-yorkshire\n138\n499,392\n1,134,723\n420.66 MiB\n12 sec\n4 sec\n1.45 GiB\n\n\n2032\nEngland/north-yorkshire\n138\n499,392\n1,134,723\n420.66 MiB\n12 sec\n4 sec\n1.45 GiB\n\n\n2039\nEngland/north-yorkshire\n138\n509,099\n1,143,895\n421.58 MiB\n12 sec\n4 sec\n1.46 GiB\n\n\n2012\nEngland/northamptonshire\n91\n289,575\n720,263\n284.41 MiB\n8 sec\n2 sec\n941.24 MiB\n\n\n2020\nEngland/northamptonshire\n91\n316,553\n762,382\n304.38 MiB\n8 sec\n2 sec\n981.06 MiB\n\n\n2022\nEngland/northamptonshire\n91\n352,529\n828,003\n320.83 MiB\n9 sec\n3 sec\n1005.56 MiB\n\n\n2032\nEngland/northamptonshire\n91\n352,529\n828,003\n320.83 MiB\n9 sec\n3 sec\n1005.56 MiB\n\n\n2039\nEngland/northamptonshire\n91\n370,555\n855,812\n328.05 MiB\n9 sec\n3 sec\n1016.77 MiB\n\n\n2012\nEngland/northumberland\n40\n138,928\n315,894\n120.67 MiB\n5 sec\n1 sec\n423.02 MiB\n\n\n2020\nEngland/northumberland\n40\n143,516\n322,616\n121.95 MiB\n5 sec\n1 sec\n423.78 MiB\n\n\n2022\nEngland/northumberland\n40\n148,792\n333,456\n122.08 MiB\n5 sec\n1 sec\n421.39 MiB\n\n\n2032\nEngland/northumberland\n40\n148,792\n333,456\n122.08 MiB\n5 sec\n1 sec\n421.39 MiB\n\n\n2039\nEngland/northumberland\n40\n150,259\n337,186\n122.26 MiB\n5 sec\n1 sec\n421.38 MiB\n\n\n2012\nEngland/nottinghamshire\n138\n460,022\n1,123,005\n432.55 MiB\n12 sec\n4 sec\n1.49 GiB\n\n\n2020\nEngland/nottinghamshire\n138\n486,163\n1,169,489\n453.88 MiB\n12 sec\n4 sec\n1.53 GiB\n\n\n2022\nEngland/nottinghamshire\n138\n522,944\n1,248,804\n473.55 MiB\n12 sec\n5 sec\n1.56 GiB\n\n\n2032\nEngland/nottinghamshire\n138\n522,944\n1,248,804\n473.55 MiB\n12 sec\n5 sec\n1.56 GiB\n\n\n2039\nEngland/nottinghamshire\n138\n543,291\n1,281,812\n482.41 MiB\n13 sec\n5 sec\n1.66 GiB\n\n\n2012\nEngland/oxfordshire\n86\n261,235\n671,997\n260.47 MiB\n7 sec\n2 sec\n852.78 MiB\n\n\n2020\nEngland/oxfordshire\n86\n274,908\n695,490\n271.66 MiB\n7 sec\n2 sec\n918.84 MiB\n\n\n2022\nEngland/oxfordshire\n86\n293,368\n729,866\n275.44 MiB\n7 sec\n2 sec\n919.28 MiB\n\n\n2032\nEngland/oxfordshire\n86\n293,368\n729,866\n275.44 MiB\n8 sec\n2 sec\n919.28 MiB\n\n\n2039\nEngland/oxfordshire\n86\n303,035\n743,227\n277.55 MiB\n8 sec\n2 sec\n922.13 MiB\n\n\n2012\nEngland/rutland\n5\n14,912\n38,314\n16.37 MiB\n2 sec\n1 sec\n53.95 MiB\n\n\n2020\nEngland/rutland\n5\n16,698\n40,381\n17.09 MiB\n2 sec\n1 sec\n57.84 MiB\n\n\n2022\nEngland/rutland\n5\n18,198\n44,193\n18.26 MiB\n2 sec\n1 sec\n59.97 MiB\n\n\n2032\nEngland/rutland\n5\n18,198\n44,193\n18.26 MiB\n2 sec\n1 sec\n59.97 MiB\n\n\n2039\nEngland/rutland\n5\n18,914\n45,659\n18.71 MiB\n2 sec\n1 sec\n61.09 MiB\n\n\n2012\nEngland/shropshire\n62\n197,768\n483,414\n186.37 MiB\n6 sec\n1 sec\n550.90 MiB\n\n\n2020\nEngland/shropshire\n62\n211,035\n508,233\n195.85 MiB\n6 sec\n1 sec\n568.56 MiB\n\n\n2022\nEngland/shropshire\n62\n228,285\n558,755\n207.37 MiB\n6 sec\n1 sec\n740.52 MiB\n\n\n2032\nEngland/shropshire\n62\n228,285\n558,755\n207.37 MiB\n6 sec\n1 sec\n740.52 MiB\n\n\n2039\nEngland/shropshire\n62\n236,015\n581,476\n213.31 MiB\n6 sec\n1 sec\n749.75 MiB\n\n\n2012\nEngland/somerset\n124\n392,224\n938,968\n359.26 MiB\n10 sec\n3 sec\n1.05 GiB\n\n\n2020\nEngland/somerset\n124\n421,693\n979,526\n376.56 MiB\n10 sec\n3 sec\n1.08 GiB\n\n\n2022\nEngland/somerset\n124\n428,543\n993,364\n381.41 MiB\n10 sec\n3 sec\n1.09 GiB\n\n\n2032\nEngland/somerset\n124\n463,526\n1,054,161\n394.38 MiB\n11 sec\n3 sec\n1.41 GiB\n\n\n2039\nEngland/somerset\n124\n484,587\n1,087,596\n404.50 MiB\n11 sec\n3 sec\n1.43 GiB\n\n\n2012\nEngland/south-yorkshire\n172\n566,664\n1,372,435\n528.13 MiB\n14 sec\n6 sec\n1.75 GiB\n\n\n2020\nEngland/south-yorkshire\n172\n597,694\n1,418,840\n548.61 MiB\n15 sec\n6 sec\n1.79 GiB\n\n\n2022\nEngland/south-yorkshire\n172\n637,411\n1,493,544\n563.93 MiB\n15 sec\n6 sec\n1.81 GiB\n\n\n2032\nEngland/south-yorkshire\n172\n637,411\n1,493,544\n563.93 MiB\n15 sec\n6 sec\n1.81 GiB\n\n\n2039\nEngland/south-yorkshire\n172\n659,843\n1,531,313\n575.33 MiB\n15 sec\n6 sec\n1.83 GiB\n\n\n2012\nEngland/staffordshire\n143\n464,441\n1,111,144\n425.33 MiB\n12 sec\n4 sec\n1.47 GiB\n\n\n2020\nEngland/staffordshire\n143\n486,645\n1,139,752\n437.56 MiB\n12 sec\n4 sec\n1.49 GiB\n\n\n2022\nEngland/staffordshire\n143\n510,634\n1,188,857\n444.92 MiB\n12 sec\n4 sec\n1.50 GiB\n\n\n2032\nEngland/staffordshire\n143\n510,634\n1,188,857\n444.92 MiB\n12 sec\n4 sec\n1.50 GiB\n\n\n2039\nEngland/staffordshire\n143\n522,882\n1,215,006\n453.00 MiB\n12 sec\n4 sec\n1.52 GiB\n\n\n2012\nEngland/suffolk\n90\n312,178\n746,863\n285.39 MiB\n8 sec\n2 sec\n933.65 MiB\n\n\n2020\nEngland/suffolk\n90\n331,778\n766,023\n294.07 MiB\n8 sec\n2 sec\n950.73 MiB\n\n\n2022\nEngland/suffolk\n90\n336,599\n773,019\n296.48 MiB\n8 sec\n2 sec\n956.16 MiB\n\n\n2032\nEngland/suffolk\n90\n360,555\n800,189\n298.09 MiB\n8 sec\n2 sec\n952.75 MiB\n\n\n2039\nEngland/suffolk\n90\n375,536\n817,179\n302.95 MiB\n8 sec\n2 sec\n963.06 MiB\n\n\n2012\nEngland/surrey\n151\n458,108\n1,168,112\n456.56 MiB\n14 sec\n7 sec\n1.55 GiB\n\n\n2020\nEngland/surrey\n151\n480,930\n1,195,509\n472.95 MiB\n14 sec\n6 sec\n1.58 GiB\n\n\n2022\nEngland/surrey\n151\n518,720\n1,214,557\n467.08 MiB\n14 sec\n6 sec\n1.56 GiB\n\n\n2032\nEngland/surrey\n151\n518,720\n1,214,557\n467.08 MiB\n14 sec\n6 sec\n1.56 GiB\n\n\n2039\nEngland/surrey\n151\n538,941\n1,221,227\n464.76 MiB\n14 sec\n6 sec\n1.64 GiB\n\n\n2012\nEngland/tyne-and-wear\n145\n483,909\n1,119,030\n427.37 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2020\nEngland/tyne-and-wear\n145\n501,383\n1,143,194\n439.11 MiB\n11 sec\n4 sec\n1.50 GiB\n\n\n2022\nEngland/tyne-and-wear\n145\n521,777\n1,168,078\n440.06 MiB\n11 sec\n4 sec\n1.49 GiB\n\n\n2032\nEngland/tyne-and-wear\n145\n521,777\n1,168,078\n440.06 MiB\n11 sec\n4 sec\n1.49 GiB\n\n\n2039\nEngland/tyne-and-wear\n145\n532,652\n1,177,340\n441.39 MiB\n11 sec\n4 sec\n1.58 GiB\n\n\n2012\nEngland/warwickshire\n108\n361,467\n896,673\n347.46 MiB\n10 sec\n3 sec\n1.03 GiB\n\n\n2020\nEngland/warwickshire\n108\n392,639\n958,833\n373.64 MiB\n10 sec\n3 sec\n1.08 GiB\n\n\n2022\nEngland/warwickshire\n108\n432,682\n1,061,955\n405.97 MiB\n11 sec\n4 sec\n1.44 GiB\n\n\n2032\nEngland/warwickshire\n108\n432,682\n1,061,955\n405.97 MiB\n11 sec\n4 sec\n1.44 GiB\n\n\n2039\nEngland/warwickshire\n108\n454,732\n1,112,230\n424.11 MiB\n11 sec\n4 sec\n1.47 GiB\n\n\n2012\nEngland/west-midlands\n314\n958,034\n2,477,391\n990.28 MiB\n33 sec\n19 sec\n3.24 GiB\n\n\n2020\nEngland/west-midlands\n314\n1,002,273\n2,572,395\n1.01 GiB\n34 sec\n19 sec\n3.33 GiB\n\n\n2022\nEngland/west-midlands\n314\n1,046,146\n2,664,228\n1.04 GiB\n35 sec\n20 sec\n3.37 GiB\n\n\n2032\nEngland/west-midlands\n314\n1,079,612\n2,706,242\n1.04 GiB\n36 sec\n21 sec\n3.55 GiB\n\n\n2039\nEngland/west-midlands\n314\n1,128,890\n2,787,990\n1.07 GiB\n38 sec\n22 sec\n3.59 GiB\n\n\n2012\nEngland/west-sussex\n100\n348,766\n836,646\n321.38 MiB\n9 sec\n3 sec\n1004.51 MiB\n\n\n2020\nEngland/west-sussex\n100\n375,837\n871,029\n337.97 MiB\n9 sec\n3 sec\n1.01 GiB\n\n\n2022\nEngland/west-sussex\n100\n419,347\n931,573\n350.32 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2032\nEngland/west-sussex\n100\n419,347\n931,573\n350.32 MiB\n9 sec\n3 sec\n1.03 GiB\n\n\n2039\nEngland/west-sussex\n100\n442,292\n958,567\n356.98 MiB\n9 sec\n3 sec\n1.04 GiB\n\n\n2012\nEngland/west-yorkshire\n299\n921,242\n2,271,833\n893.92 MiB\n29 sec\n15 sec\n3.05 GiB\n\n\n2020\nEngland/west-yorkshire\n299\n963,460\n2,339,931\n930.52 MiB\n29 sec\n16 sec\n3.12 GiB\n\n\n2022\nEngland/west-yorkshire\n299\n1,021,830\n2,434,902\n945.81 MiB\n30 sec\n16 sec\n3.13 GiB\n\n\n2032\nEngland/west-yorkshire\n299\n1,021,830\n2,434,902\n945.81 MiB\n30 sec\n16 sec\n3.13 GiB\n\n\n2039\nEngland/west-yorkshire\n299\n1,053,859\n2,481,358\n957.44 MiB\n31 sec\n16 sec\n3.32 GiB\n\n\n2012\nEngland/wiltshire\n89\n285,600\n704,491\n274.63 MiB\n7 sec\n2 sec\n921.03 MiB\n\n\n2020\nEngland/wiltshire\n89\n309,159\n735,088\n288.25 MiB\n8 sec\n2 sec\n947.38 MiB\n\n\n2022\nEngland/wiltshire\n89\n335,400\n774,105\n292.74 MiB\n8 sec\n2 sec\n949.12 MiB\n\n\n2032\nEngland/wiltshire\n89\n335,400\n774,105\n292.74 MiB\n8 sec\n2 sec\n949.12 MiB\n\n\n2039\nEngland/wiltshire\n89\n348,866\n792,075\n296.45 MiB\n8 sec\n2 sec\n955.03 MiB\n\n\n2012\nEngland/worcestershire\n85\n240,958\n578,628\n221.50 MiB\n6 sec\n2 sec\n770.52 MiB\n\n\n2020\nEngland/worcestershire\n85\n255,594\n601,116\n231.62 MiB\n7 sec\n2 sec\n790.33 MiB\n\n\n2022\nEngland/worcestershire\n85\n274,309\n644,922\n242.01 MiB\n7 sec\n2 sec\n849.75 MiB\n\n\n2032\nEngland/worcestershire\n85\n274,309\n644,922\n242.01 MiB\n7 sec\n2 sec\n849.75 MiB\n\n\n2039\nEngland/worcestershire\n85\n283,275\n666,303\n248.40 MiB\n7 sec\n2 sec\n861.28 MiB\n\n\n2012\nScotland/argyll-and-west-dunbartonshire\n41\n82,845\n176,560\n74.08 MiB\n11 sec\n1 sec\n238.90 MiB\n\n\n2020\nScotland/argyll-and-west-dunbartonshire\n41\n85,066\n174,197\n73.18 MiB\n11 sec\n1 sec\n236.56 MiB\n\n\n2022\nScotland/argyll-and-west-dunbartonshire\n41\n85,263\n172,737\n72.59 MiB\n11 sec\n1 sec\n235.57 MiB\n\n\n2032\nScotland/argyll-and-west-dunbartonshire\n41\n85,398\n165,068\n67.76 MiB\n11 sec\n1 sec\n224.69 MiB\n\n\n2039\nScotland/argyll-and-west-dunbartonshire\n41\n84,758\n159,196\n65.25 MiB\n11 sec\n1 sec\n219.77 MiB\n\n\n2012\nScotland/ayrshire\n93\n168,387\n370,588\n146.33 MiB\n9 sec\n1 sec\n483.77 MiB\n\n\n2020\nScotland/ayrshire\n93\n133,922\n283,894\n112.46 MiB\n8 sec\n1 sec\n416.08 MiB\n\n\n2022\nScotland/ayrshire\n93\n173,199\n367,016\n143.70 MiB\n9 sec\n1 sec\n476.04 MiB\n\n\n2032\nScotland/ayrshire\n93\n174,290\n356,750\n137.29 MiB\n9 sec\n1 sec\n462.30 MiB\n\n\n2039\nScotland/ayrshire\n93\n173,349\n347,174\n133.28 MiB\n9 sec\n1 sec\n455.01 MiB\n\n\n2012\nScotland/dumfries-and-galloway\n40\n68,416\n149,648\n61.42 MiB\n6 sec\n1 sec\n217.04 MiB\n\n\n2020\nScotland/dumfries-and-galloway\n40\n70,212\n148,123\n60.21 MiB\n6 sec\n1 sec\n213.17 MiB\n\n\n2022\nScotland/dumfries-and-galloway\n40\n70,455\n147,351\n59.47 MiB\n6 sec\n1 sec\n211.49 MiB\n\n\n2032\nScotland/dumfries-and-galloway\n40\n70,840\n142,418\n56.10 MiB\n6 sec\n1 sec\n204.07 MiB\n\n\n2039\nScotland/dumfries-and-galloway\n40\n70,668\n138,573\n54.77 MiB\n6 sec\n1 sec\n202.05 MiB\n\n\n2012\nScotland/edinburgh\n111\n225,093\n497,378\n186.98 MiB\n7 sec\n2 sec\n555.70 MiB\n\n\n2020\nScotland/edinburgh\n111\n242,994\n525,476\n198.41 MiB\n8 sec\n2 sec\n732.84 MiB\n\n\n2022\nScotland/edinburgh\n111\n248,491\n532,384\n200.96 MiB\n8 sec\n2 sec\n738.35 MiB\n\n\n2032\nScotland/edinburgh\n111\n273,234\n562,902\n207.62 MiB\n8 sec\n2 sec\n791.61 MiB\n\n\n2039\nScotland/edinburgh\n111\n288,360\n578,847\n210.49 MiB\n8 sec\n2 sec\n793.17 MiB\n\n\n2012\nScotland/fife\n104\n162,121\n368,038\n145.78 MiB\n6 sec\n1 sec\n484.35 MiB\n\n\n2020\nScotland/fife\n104\n159,563\n371,896\n147.05 MiB\n6 sec\n1 sec\n486.65 MiB\n\n\n2022\nScotland/fife\n104\n159,580\n371,743\n146.38 MiB\n6 sec\n1 sec\n485.15 MiB\n\n\n2032\nScotland/fife\n104\n166,255\n370,447\n141.66 MiB\n6 sec\n1 sec\n472.29 MiB\n\n\n2039\nScotland/fife\n104\n169,335\n366,438\n138.24 MiB\n6 sec\n1 sec\n463.01 MiB\n\n\n2012\nScotland/forth-valley\n78\n130,141\n302,504\n121.15 MiB\n8 sec\n1 sec\n414.67 MiB\n\n\n2020\nScotland/forth-valley\n78\n136,735\n308,153\n122.32 MiB\n8 sec\n1 sec\n436.38 MiB\n\n\n2022\nScotland/forth-valley\n78\n138,447\n310,297\n122.89 MiB\n8 sec\n1 sec\n437.80 MiB\n\n\n2032\nScotland/forth-valley\n78\n146,138\n318,438\n122.93 MiB\n8 sec\n1 sec\n435.84 MiB\n\n\n2039\nScotland/forth-valley\n78\n150,069\n322,395\n123.80 MiB\n8 sec\n1 sec\n436.43 MiB\n\n\n2012\nScotland/greater-glasgow\n184\n368,013\n805,502\n306.63 MiB\n11 sec\n4 sec\n985.47 MiB\n\n\n2020\nScotland/greater-glasgow\n184\n382,846\n836,875\n320.55 MiB\n11 sec\n4 sec\n1013.11 MiB\n\n\n2022\nScotland/greater-glasgow\n184\n388,050\n842,636\n322.55 MiB\n11 sec\n4 sec\n1017.20 MiB\n\n\n2032\nScotland/greater-glasgow\n184\n411,534\n866,464\n327.49 MiB\n11 sec\n4 sec\n1.00 GiB\n\n\n2039\nScotland/greater-glasgow\n184\n427,529\n880,981\n329.51 MiB\n11 sec\n4 sec\n1023.96 MiB\n\n\n2012\nScotland/highlands-and-islands\n78\n136,249\n305,988\n140.72 MiB\n56 sec\n1 sec\n451.01 MiB\n\n\n2020\nScotland/highlands-and-islands\n78\n144,639\n307,886\n140.39 MiB\n57 sec\n1 sec\n447.70 MiB\n\n\n2022\nScotland/highlands-and-islands\n78\n145,837\n307,923\n139.70 MiB\n57 sec\n1 sec\n445.96 MiB\n\n\n2032\nScotland/highlands-and-islands\n78\n149,761\n305,422\n135.12 MiB\n56 sec\n1 sec\n434.37 MiB\n\n\n2039\nScotland/highlands-and-islands\n78\n150,652\n301,591\n133.25 MiB\n56 sec\n1 sec\n430.68 MiB\n\n\n2012\nScotland/lanarkshire\n160\n287,147\n654,563\n258.58 MiB\n11 sec\n2 sec\n903.22 MiB\n\n\n2020\nScotland/lanarkshire\n160\n302,111\n661,042\n261.24 MiB\n11 sec\n2 sec\n906.74 MiB\n\n\n2022\nScotland/lanarkshire\n160\n305,554\n662,692\n261.37 MiB\n11 sec\n2 sec\n907.35 MiB\n\n\n2032\nScotland/lanarkshire\n160\n318,581\n667,589\n257.31 MiB\n11 sec\n2 sec\n895.50 MiB\n\n\n2039\nScotland/lanarkshire\n160\n324,614\n666,795\n254.59 MiB\n11 sec\n2 sec\n887.40 MiB\n\n\n2012\nScotland/north-east\n132\n250,789\n587,273\n228.59 MiB\n14 sec\n2 sec\n795.80 MiB\n\n\n2020\nScotland/north-east\n132\n267,964\n586,245\n230.01 MiB\n14 sec\n2 sec\n841.08 MiB\n\n\n2022\nScotland/north-east\n132\n271,745\n587,957\n230.81 MiB\n14 sec\n2 sec\n842.86 MiB\n\n\n2032\nScotland/north-east\n132\n287,988\n594,876\n228.56 MiB\n14 sec\n2 sec\n836.51 MiB\n\n\n2039\nScotland/north-east\n132\n297,440\n594,445\n226.47 MiB\n14 sec\n2 sec\n830.82 MiB\n\n\n2012\nScotland/renfrewshire-and-inverclyde\n55\n119,057\n254,125\n99.98 MiB\n5 sec\n1 sec\n293.66 MiB\n\n\n2020\nScotland/renfrewshire-and-inverclyde\n55\n124,460\n256,040\n100.44 MiB\n5 sec\n1 sec\n293.33 MiB\n\n\n2022\nScotland/renfrewshire-and-inverclyde\n55\n125,450\n256,087\n100.34 MiB\n5 sec\n1 sec\n293.55 MiB\n\n\n2032\nScotland/renfrewshire-and-inverclyde\n55\n129,185\n255,008\n97.93 MiB\n5 sec\n1 sec\n287.17 MiB\n\n\n2039\nScotland/renfrewshire-and-inverclyde\n55\n131,507\n252,677\n96.59 MiB\n5 sec\n1 sec\n306.43 MiB\n\n\n2012\nScotland/tayside\n92\n186,890\n414,921\n162.38 MiB\n10 sec\n1 sec\n513.43 MiB\n\n\n2020\nScotland/tayside\n92\n195,140\n416,793\n162.39 MiB\n10 sec\n1 sec\n510.25 MiB\n\n\n2022\nScotland/tayside\n92\n197,192\n416,846\n162.22 MiB\n10 sec\n1 sec\n510.05 MiB\n\n\n2032\nScotland/tayside\n92\n205,693\n415,175\n158.45 MiB\n10 sec\n1 sec\n501.29 MiB\n\n\n2039\nScotland/tayside\n92\n210,290\n411,445\n156.35 MiB\n10 sec\n1 sec\n497.39 MiB\n\n\n2012\nScotland/the-lothians-and-scottish-borders\n111\n205,879\n482,896\n194.90 MiB\n12 sec\n2 sec\n580.86 MiB\n\n\n2020\nScotland/the-lothians-and-scottish-borders\n111\n223,446\n501,223\n201.50 MiB\n12 sec\n2 sec\n590.52 MiB\n\n\n2022\nScotland/the-lothians-and-scottish-borders\n111\n227,783\n507,880\n203.76 MiB\n12 sec\n2 sec\n595.27 MiB\n\n\n2032\nScotland/the-lothians-and-scottish-borders\n111\n246,603\n537,145\n210.28 MiB\n12 sec\n2 sec\n761.01 MiB\n\n\n2039\nScotland/the-lothians-and-scottish-borders\n111\n257,299\n552,545\n214.47 MiB\n12 sec\n2 sec\n767.17 MiB\n\n\n2012\nWales/bridgend-and-neath-port-talbot\n38\n119,725\n283,159\n108.22 MiB\n4 sec\n1 sec\n382.14 MiB\n\n\n2020\nWales/bridgend-and-neath-port-talbot\n38\n123,909\n289,896\n111.11 MiB\n4 sec\n1 sec\n387.34 MiB\n\n\n2022\nWales/bridgend-and-neath-port-talbot\n38\n124,921\n292,227\n111.51 MiB\n4 sec\n1 sec\n387.62 MiB\n\n\n2032\nWales/bridgend-and-neath-port-talbot\n38\n128,601\n301,529\n113.58 MiB\n4 sec\n1 sec\n390.72 MiB\n\n\n2039\nWales/bridgend-and-neath-port-talbot\n38\n129,740\n307,260\n114.33 MiB\n4 sec\n1 sec\n391.18 MiB\n\n\n2012\nWales/cardiff-and-vale-of-glamorgan\n63\n199,208\n484,182\n187.22 MiB\n5 sec\n1 sec\n558.11 MiB\n\n\n2020\nWales/cardiff-and-vale-of-glamorgan\n63\n214,676\n499,272\n194.75 MiB\n5 sec\n1 sec\n572.81 MiB\n\n\n2022\nWales/cardiff-and-vale-of-glamorgan\n63\n218,981\n502,763\n196.15 MiB\n5 sec\n1 sec\n575.96 MiB\n\n\n2032\nWales/cardiff-and-vale-of-glamorgan\n63\n240,112\n522,526\n199.47 MiB\n5 sec\n1 sec\n577.76 MiB\n\n\n2039\nWales/cardiff-and-vale-of-glamorgan\n63\n254,162\n531,549\n201.86 MiB\n6 sec\n1 sec\n737.22 MiB\n\n\n2012\nWales/central-valleys\n38\n124,691\n296,581\n115.15 MiB\n4 sec\n1 sec\n396.09 MiB\n\n\n2020\nWales/central-valleys\n38\n130,072\n301,907\n117.77 MiB\n4 sec\n1 sec\n400.86 MiB\n\n\n2022\nWales/central-valleys\n38\n131,383\n303,557\n118.40 MiB\n4 sec\n1 sec\n424.36 MiB\n\n\n2032\nWales/central-valleys\n38\n136,404\n310,032\n118.04 MiB\n4 sec\n1 sec\n421.02 MiB\n\n\n2039\nWales/central-valleys\n38\n138,735\n314,703\n119.17 MiB\n4 sec\n1 sec\n422.91 MiB\n\n\n2012\nWales/conwy-and-denbighshire\n30\n92,732\n211,205\n80.51 MiB\n4 sec\n1 sec\n251.37 MiB\n\n\n2020\nWales/conwy-and-denbighshire\n30\n95,314\n213,302\n81.57 MiB\n4 sec\n1 sec\n253.52 MiB\n\n\n2022\nWales/conwy-and-denbighshire\n30\n95,881\n214,182\n81.86 MiB\n4 sec\n1 sec\n254.11 MiB\n\n\n2032\nWales/conwy-and-denbighshire\n30\n97,683\n218,122\n81.12 MiB\n4 sec\n1 sec\n251.06 MiB\n\n\n2039\nWales/conwy-and-denbighshire\n30\n97,687\n220,933\n80.93 MiB\n4 sec\n1 sec\n249.66 MiB\n\n\n2012\nWales/flintshire-and-wrexham\n38\n122,180\n288,696\n113.33 MiB\n4 sec\n1 sec\n393.53 MiB\n\n\n2020\nWales/flintshire-and-wrexham\n38\n127,660\n292,056\n114.59 MiB\n4 sec\n1 sec\n395.17 MiB\n\n\n2022\nWales/flintshire-and-wrexham\n38\n129,007\n292,644\n115.04 MiB\n4 sec\n1 sec\n396.45 MiB\n\n\n2032\nWales/flintshire-and-wrexham\n38\n134,527\n292,817\n112.38 MiB\n4 sec\n1 sec\n410.81 MiB\n\n\n2039\nWales/flintshire-and-wrexham\n38\n136,425\n293,540\n112.23 MiB\n4 sec\n1 sec\n410.67 MiB\n\n\n2012\nWales/gwent-valleys\n46\n144,178\n341,543\n132.18 MiB\n4 sec\n1 sec\n450.92 MiB\n\n\n2020\nWales/gwent-valleys\n46\n148,386\n344,566\n132.84 MiB\n4 sec\n1 sec\n450.78 MiB\n\n\n2022\nWales/gwent-valleys\n46\n149,374\n345,498\n132.73 MiB\n4 sec\n1 sec\n450.12 MiB\n\n\n2032\nWales/gwent-valleys\n46\n151,842\n347,976\n130.51 MiB\n4 sec\n1 sec\n442.75 MiB\n\n\n2039\nWales/gwent-valleys\n46\n151,729\n350,397\n130.60 MiB\n4 sec\n1 sec\n442.92 MiB\n\n\n2012\nWales/gwynedd\n17\n52,926\n122,595\n48.30 MiB\n3 sec\n1 sec\n141.40 MiB\n\n\n2020\nWales/gwynedd\n17\n55,064\n124,569\n49.30 MiB\n3 sec\n1 sec\n143.64 MiB\n\n\n2022\nWales/gwynedd\n17\n55,683\n125,030\n49.22 MiB\n3 sec\n1 sec\n143.38 MiB\n\n\n2032\nWales/gwynedd\n17\n58,372\n128,844\n49.83 MiB\n3 sec\n1 sec\n143.73 MiB\n\n\n2039\nWales/gwynedd\n17\n59,746\n130,948\n50.66 MiB\n3 sec\n1 sec\n145.55 MiB\n\n\n2012\nWales/isle-of-anglesey\n9\n30,797\n69,919\n27.65 MiB\n3 sec\n1 sec\n96.69 MiB\n\n\n2020\nWales/isle-of-anglesey\n9\n31,366\n69,845\n27.85 MiB\n3 sec\n1 sec\n97.28 MiB\n\n\n2022\nWales/isle-of-anglesey\n9\n31,488\n69,864\n27.91 MiB\n3 sec\n1 sec\n97.60 MiB\n\n\n2032\nWales/isle-of-anglesey\n9\n31,601\n69,502\n27.10 MiB\n3 sec\n1 sec\n95.40 MiB\n\n\n2039\nWales/isle-of-anglesey\n9\n31,337\n69,423\n26.91 MiB\n3 sec\n1 sec\n95.26 MiB\n\n\n2012\nWales/monmouthshire-and-newport\n31\n100,402\n240,491\n94.45 MiB\n4 sec\n1 sec\n280.30 MiB\n\n\n2020\nWales/monmouthshire-and-newport\n31\n104,394\n250,185\n98.12 MiB\n4 sec\n1 sec\n286.88 MiB\n\n\n2022\nWales/monmouthshire-and-newport\n31\n105,481\n253,282\n99.28 MiB\n4 sec\n1 sec\n288.93 MiB\n\n\n2032\nWales/monmouthshire-and-newport\n31\n109,752\n265,785\n102.22 MiB\n4 sec\n1 sec\n371.30 MiB\n\n\n2039\nWales/monmouthshire-and-newport\n31\n111,246\n273,319\n103.91 MiB\n4 sec\n1 sec\n373.72 MiB\n\n\n2012\nWales/powys\n19\n59,028\n132,725\n51.23 MiB\n4 sec\n1 sec\n184.96 MiB\n\n\n2020\nWales/powys\n19\n59,972\n132,328\n50.62 MiB\n4 sec\n1 sec\n183.27 MiB\n\n\n2022\nWales/powys\n19\n60,190\n132,467\n50.48 MiB\n4 sec\n1 sec\n182.78 MiB\n\n\n2032\nWales/powys\n19\n59,586\n133,010\n49.65 MiB\n4 sec\n1 sec\n180.54 MiB\n\n\n2039\nWales/powys\n19\n57,969\n133,514\n49.37 MiB\n4 sec\n1 sec\n179.70 MiB\n\n\n2012\nWales/south-west-wales\n50\n165,004\n383,260\n145.80 MiB\n5 sec\n1 sec\n474.24 MiB\n\n\n2020\nWales/south-west-wales\n50\n170,327\n385,937\n146.54 MiB\n5 sec\n1 sec\n474.39 MiB\n\n\n2022\nWales/south-west-wales\n50\n171,623\n386,901\n147.01 MiB\n5 sec\n1 sec\n476.02 MiB\n\n\n2032\nWales/south-west-wales\n50\n175,897\n392,107\n145.21 MiB\n5 sec\n1 sec\n469.23 MiB\n\n\n2039\nWales/south-west-wales\n50\n176,482\n394,303\n144.54 MiB\n5 sec\n1 sec\n467.40 MiB\n\n\n2012\nWales/swansea\n31\n104,423\n242,128\n93.14 MiB\n4 sec\n1 sec\n276.08 MiB\n\n\n2020\nWales/swansea\n31\n110,304\n247,820\n95.76 MiB\n4 sec\n1 sec\n281.31 MiB\n\n\n2022\nWales/swansea\n31\n111,940\n249,098\n96.15 MiB\n4 sec\n1 sec\n282.09 MiB\n\n\n2032\nWales/swansea\n31\n119,141\n257,653\n98.32 MiB\n4 sec\n1 sec\n285.46 MiB\n\n\n2039\nWales/swansea\n31\n123,450\n262,306\n99.97 MiB\n4 sec\n1 sec\n366.54 MiB\n\n\n2012\nspecial/birmingham\n132\n410,243\n1,104,216\n450.75 MiB\n14 sec\n5 sec\n1.55 GiB\n\n\n2020\nspecial/birmingham\n132\n429,124\n1,148,426\n470.60 MiB\n14 sec\n5 sec\n1.59 GiB\n\n\n2022\nspecial/birmingham\n132\n434,527\n1,156,702\n473.72 MiB\n15 sec\n5 sec\n1.59 GiB\n\n\n2032\nspecial/birmingham\n132\n467,993\n1,198,716\n479.63 MiB\n15 sec\n5 sec\n1.59 GiB\n\n\n2039\nspecial/birmingham\n132\n492,029\n1,230,211\n489.58 MiB\n16 sec\n5 sec\n1.61 GiB\n\n\n2012\nspecial/liverpool\n61\n207,217\n479,774\n182.06 MiB\n7 sec\n1 sec\n538.83 MiB\n\n\n2020\nspecial/liverpool\n61\n224,431\n503,264\n193.74 MiB\n7 sec\n1 sec\n562.01 MiB\n\n\n2022\nspecial/liverpool\n61\n241,366\n536,264\n206.67 MiB\n7 sec\n1 sec\n742.97 MiB\n\n\n2032\nspecial/liverpool\n61\n241,366\n536,264\n206.67 MiB\n7 sec\n1 sec\n742.97 MiB\n\n\n2039\nspecial/liverpool\n61\n251,435\n549,857\n211.22 MiB\n7 sec\n1 sec\n751.45 MiB\n\n\n2012\nspecial/manchester\n57\n204,775\n525,548\n207.38 MiB\n10 sec\n2 sec\n752.26 MiB\n\n\n2020\nspecial/manchester\n57\n220,664\n551,613\n221.09 MiB\n10 sec\n2 sec\n780.27 MiB\n\n\n2022\nspecial/manchester\n57\n241,262\n576,313\n226.35 MiB\n10 sec\n2 sec\n785.85 MiB\n\n\n2032\nspecial/manchester\n57\n241,262\n576,313\n226.35 MiB\n10 sec\n2 sec\n785.84 MiB\n\n\n2039\nspecial/manchester\n57\n253,464\n589,904\n230.46 MiB\n11 sec\n2 sec\n793.05 MiB\n\n\n2012\nspecial/northwest_transpennine\n829\n2,653,096\n6,416,497\n2.45 GiB\n3 min\n2 min\n7.74 GiB\n\n\n2020\nspecial/northwest_transpennine\n829\n2,788,624\n6,616,117\n2.56 GiB\n3 min\n2 min\n7.95 GiB\n\n\n2022\nspecial/northwest_transpennine\n829\n2,960,285\n6,908,374\n2.62 GiB\n3 min\n2 min\n8.02 GiB\n\n\n2032\nspecial/northwest_transpennine\n829\n2,960,285\n6,908,374\n2.62 GiB\n3 min\n2 min\n8.02 GiB\n\n\n2039\nspecial/northwest_transpennine\n829\n3,058,114\n7,059,122\n2.66 GiB\n3 min\n2 min\n8.09 GiB\n\n\n2012\nspecial/oxford\n18\n55,081\n154,065\n61.14 MiB\n4 sec\n1 sec\n207.79 MiB\n\n\n2020\nspecial/oxford\n18\n55,235\n153,045\n61.53 MiB\n4 sec\n1 sec\n208.41 MiB\n\n\n2022\nspecial/oxford\n18\n56,840\n149,534\n58.11 MiB\n4 sec\n1 sec\n199.69 MiB\n\n\n2032\nspecial/oxford\n18\n56,840\n149,534\n58.11 MiB\n4 sec\n1 sec\n199.69 MiB\n\n\n2039\nspecial/oxford\n18\n58,038\n147,239\n56.67 MiB\n4 sec\n1 sec\n196.62 MiB\n\n\n2012\nspecial/oxford_cambridge_arc\n353\n1,112,235\n2,828,466\n1.08 GiB\n40 sec\n21 sec\n3.61 GiB\n\n\n2020\nspecial/oxford_cambridge_arc\n353\n1,199,021\n2,950,743\n1.14 GiB\n41 sec\n21 sec\n3.73 GiB\n\n\n2022\nspecial/oxford_cambridge_arc\n353\n1,296,471\n3,107,289\n1.17 GiB\n43 sec\n22 sec\n3.77 GiB\n\n\n2032\nspecial/oxford_cambridge_arc\n353\n1,314,402\n3,122,071\n1.17 GiB\n43 sec\n22 sec\n3.76 GiB\n\n\n2039\nspecial/oxford_cambridge_arc\n353\n1,372,547\n3,189,664\n1.18 GiB\n44 sec\n23 sec\n3.78 GiB\n\n\n\nNotes:\n\npb_file_size refers to the size of the uncompressed protobuf file in data/output/\nThe total runtime is usually dominated by matching workers to businesses, so commuting_runtime gives a breakdown\nMeasuring memory usage of Linux processes isn’t straightforward, so memory_usage should just be a guide\nThese measurements were all taken on one developer’s laptop, and they don’t represent multiple runs. This table just aims to give a general sense of how long running takes.\n\nThat machine has 10 cores, which matters for the parallelized commuting calculation.\n\nThe time usually doesn’t include downloading or decompressing raw data. For some areas, it might!\nscripts/collect_stats.py produces the table above"
  }
]